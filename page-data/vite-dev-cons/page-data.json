{"componentChunkName":"component---src-templates-blog-post-js","path":"/vite-dev-cons/","result":{"data":{"site":{"siteMetadata":{"title":"블로그 공사중"}},"markdownRemark":{"id":"70801943-da03-5c98-9ae6-534891604457","excerpt":"요새 Vite를 사용하는 사람들이 늘고 있다.\n인기도 많고 평도 좋아서 나도 써봤는데,\n몇 가지 문제점을 발견해서 실제로 적용하는 데에 포기한 경험이 있다.\n관련된 내용 복기용으로 정리. Vite의 특징 Vite dev mode로 들어가면 기존 webpack…","html":"<p>요새 Vite를 사용하는 사람들이 늘고 있다.\n인기도 많고 평도 좋아서 나도 써봤는데,\n몇 가지 문제점을 발견해서 실제로 적용하는 데에 포기한 경험이 있다.\n관련된 내용 복기용으로 정리.</p>\n<h2>Vite의 특징</h2>\n<p>Vite dev mode로 들어가면 기존 webpack 등의 번들러에서 사용하던 것과는 다른 점을 알 수 있는데,\nTypescript 파일들을 그대로 import해서 사용한다. vue 파일들도 그대로 import한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dd46c3a64d993c1ffd703e691ea48775/8ce22/files.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.89873417721519%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABx0lEQVR42kWS247bMAxE/f9f10WBFNhN0q5t2bpZV8uWlABTkGnQB8ICYR7NDDV8fhv8GWeEfCKVilwaVu1gXcIkFIS0+D0KbD4j5APjLKGMw00ozLEgxgJtIvLRkPaKYVMzNh/ReketDbV1OBcQU4bdHJwPmCaB/ngi5x2r1DiOA7PeoPKBWk54n3j+rA2DE58YZwFjNEIIeD6f0Pp1llLCWovL5YJSCoOmaUJKCVIppLPCpR05ZjweHa01DMlMMNah1cqN3jvD9n2H9wExJozjyOrO84TWhuEpRhytw8QdOwMfaK1jcOsds1jRW+Mm1bZtDKJhOl8uv/iCUg4sy4qcMzZrsdcGE0hhQn8rDPIFXNcVUiq2SJbfQO89brc7Qwj6zWpfwFQbFpdQUkZnhWTZCmhjoZWCEIIBlBENkXWq6/WGECJnSLkSOMcId5y4W48j7f8V0lK+rncsy8LqYowwxjCAhun84+ODHVCGtBTnHJyxkHvGz1Wi5cJbZmD8p5AUvYtyoy+pDTHyUghMCpVSiCkheI+zd2wxYtKeLdNCB6MEB00/U4OejSPbOXOWlOM8zwxhy0qxZbqUFljLgeu68fslhX8BaS33satQXr0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"files.png\"\n        title=\"\"\n        src=\"/static/dd46c3a64d993c1ffd703e691ea48775/f058b/files.png\"\n        srcset=\"/static/dd46c3a64d993c1ffd703e691ea48775/c26ae/files.png 158w,\n/static/dd46c3a64d993c1ffd703e691ea48775/6bdcf/files.png 315w,\n/static/dd46c3a64d993c1ffd703e691ea48775/f058b/files.png 630w,\n/static/dd46c3a64d993c1ffd703e691ea48775/8ce22/files.png 685w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>보이는가? <code>App.vue</code>, <code>router.ts</code> 등의 파일들을 그대로 서빙하는 걸 볼 수 있다.</p>\n<p>물론 소스코드를 그대로 보내는 건 아니다. 브라우저는 Typescript를 읽을 수 없다.\n그래서 각 파일들의 내용들을 보면 vite가 알아서 잘 번들링 한 것을 볼 수 있다.\n그리고 파일이 변경이 되거나 해서 업데이트 할 일이 생기면 그 파일들만 슥슥 바뀌니 편하게 개발할 수 있다.</p>\n<p>좋다. 꽤나 괜찮아 보이는 구조다. 그런데 문제는 여기서부터 발생한다.\n웹 페이지가 엄청 커져서 너무 많은 소스 코드 파일들이 있을 때.\n소스 코드들이 엄청 불어난 큰 프로젝트일 경우에는 그 소스 파일들을 전부 불러오게 된다.\n수천개의 파일들을 로드하게 될 수 있다는 뜻.</p>\n<h2>localhost에서는 상관없지 않나요?</h2>\n<p>그렇다. 어짜피 컴퓨터 내부니까 괜찮다. 몇천개던 몇만개던 큰 문제없이 로드가 된다.\n진짜 문제는 다른 기기에서 테스트로 구동할 때.</p>\n<p>예를 들어 SPA인 꽤나 큰 웹 페이지를 아이패드에서 구동을 한다고 생각해보자.\n그러면 관련 소스 코드들을 전부 로드해야 하는데, 파일 몇만개씩으로 컴퓨터에서 아이패드로 보내야 한다.\n각각의 소스 파일 용량은 크지 않지만, 파일의 갯수가 너무 많기 때문에 쓰로틀링이 걸리게 되고,\n그래서 페이지를 로드할 때 엄청나게 오랜 시간이 걸리게 된다.\n그러면 10초~20초씩 기다려야 겨우 메인 페이지가 뜨게 되는 참사가 벌어지게 되는 것이다.</p>\n<h2>해결법?</h2>\n<p>Webpack 등 다른 번들러처럼 dev 모드에서 하나의 파일로 묶어서 서빙하도록 하는 방법은 찾지 못했다.\nVite는 다른 툴들과 비교했을 때 생각보다 자유도가 높지 않은 느낌이었다.</p>\n<p>다른 프로젝트에서 번들러를 Vite로 교체할 때 맞닥뜨리게 되는 큰 문제 중 하나라고 생각한다.</p>\n<p>또는 프로젝트 안에서 dynamic import를 구현하거나 하는 방법으로 해결할 수는 있을 것 같다(시도는 안 해 봤지만).</p>","frontmatter":{"title":"Dev mode에서 Vite는 너무 무겁다","date":"August 25, 2023","description":"파일이 너무 많아요"}},"previous":{"fields":{"slug":"/golong-calling-convention/"},"frontmatter":{"title":"Go로 짜면 리버싱이 어려운 이유"}},"next":{"fields":{"slug":"/about/"},"frontmatter":{"title":"About"}}},"pageContext":{"id":"70801943-da03-5c98-9ae6-534891604457","previousPostId":"2a8416d8-e457-574a-9747-7e11c17d1ae4","nextPostId":"2d6f7e10-7009-587e-8879-e07132c679c6"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}