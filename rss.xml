<?xml version="1.0" encoding="UTF-8"?><rss xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:content="http://purl.org/rss/1.0/modules/content/" xmlns:atom="http://www.w3.org/2005/Atom" version="2.0"><channel><title><![CDATA[Gatsby Starter Blog RSS Feed]]></title><description><![CDATA[A starter blog demonstrating what Gatsby can do.]]></description><link>https://mingyu.kim</link><generator>GatsbyJS</generator><lastBuildDate>Sun, 08 Oct 2023 07:20:11 GMT</lastBuildDate><item><title><![CDATA[About]]></title><description><![CDATA[Profile Profile
Undergraduate in Computer Science in UNIST UNIST School of Electrical & Computer Engineering (2013 ~) UNIST Computer…]]></description><link>https://mingyu.kim/about/</link><guid isPermaLink="false">https://mingyu.kim/about/</guid><content:encoded>&lt;h3&gt;Profile&lt;/h3&gt;
&lt;p&gt;Profile
Undergraduate in Computer Science in &lt;a href=&quot;https://www.unist.ac.kr/&quot;&gt;UNIST&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;UNIST School of &lt;a href=&quot;https://ib.unist.ac.kr/&quot;&gt;Electrical &amp;#x26; Computer Engineering&lt;/a&gt; (2013 ~)&lt;/p&gt;
&lt;p&gt;UNIST Computer Security Club, &lt;a href=&quot;https://hexa-unist.github.io/about/&quot;&gt;HeXA&lt;/a&gt; (2013 ~)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;3000won.com&quot;&gt;3000Won (삼천원)&lt;/a&gt; - Web Developer (2017 ~)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.recobell.com/&quot;&gt;Recobell&lt;/a&gt; - Web development intern (2017.05 ~ 2018.01)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.rocketpunch.com/companies/voost&quot;&gt;Voost&lt;/a&gt; - Web Front Engineer (2019.01 ~ 2019.05)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.prestolabs.io/&quot;&gt;Presto Labs&lt;/a&gt; - Web Developer (2019.06 ~ 2021.07)&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.sketchsoft3d.com/&quot;&gt;Sketchsoft&lt;/a&gt; - Software Engineer (2021.07 ~ )&lt;/p&gt;
&lt;h3&gt;Contact&lt;/h3&gt;
&lt;p&gt;Email: &lt;a href=&quot;mailto:contact@mingyu.kim&quot;&gt;contact@mingyu.kim&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/mango-tree&quot;&gt;github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://www.linkedin.com/in/mingyu-kim-162a06165/&quot;&gt;LinkedIn&lt;/a&gt;&lt;/p&gt;
&lt;h3&gt;Award&lt;/h3&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;2018. 08. 2018 Rotman-UNIST Trading Competition 1st Prize &lt;a href=&quot;https://news.unist.ac.kr/unist-announces-successful-completion-of-2018-rotman-unist-trading-competition/&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;2018. 07. 제 26회 중소벤처기업 지원 아이디어 공모전 장려상 (공격적 스톡옵션 및 구주증여 활용을 통한 벤처기업 인력난 해소 및 고용다각화 - 장동현, 유재인, 김민규) &lt;a href=&quot;http://news.heraldcorp.com/view.php?ud=20180726000374&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;2015. 12. 화봉고 동아리 연계 - 진로 설계 게임 &quot;찾job&quot; 제작 &lt;a href=&quot;http://www.readingnews.kr/news/articleView.html?idxno=3109&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;2014. 06. International Supercomputing Conference 14 Student Cluster Challenge (ISC 14) &lt;a href=&quot;https://news.unist.ac.kr/kor/20140624-01/&quot;&gt;Finalist&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;2014. 04. Asia student Supercomputing Challenge 14 (ASC 14) &lt;a href=&quot;https://news.unist.ac.kr/kor/20140624-01/&quot;&gt;Finalist&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;2013. 11. 화봉고 동아리 - 진로 탐색 애플리케이션 제작 &lt;a href=&quot;https://www.nocutnews.co.kr/news/1127142&quot;&gt;link&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Better Uptime! - 더 나은 On-call을 위하여]]></title><description><![CDATA[서비스가 제대로 돌고 있는지 확인하는 방법은 여러 가지가 있다.
DataDog…]]></description><link>https://mingyu.kim/better-uptime/</link><guid isPermaLink="false">https://mingyu.kim/better-uptime/</guid><pubDate>Sun, 08 Oct 2023 01:25:21 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/d41d8cd98f00b204e9800998ecf8427e/2bef9/better-uptime.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA30lEQVR42mMQklAjGzFQU7OguKqwpLqwpLoImERD+DQLiKvwi6pwC8pz8stxCchxCcjzCivyCClwC8hx8styCcjxCCoIiquiaxaWVOcVVvQOiLWy93FyC/INjPENinH3CTeycHFwDfDyiwwIiXf3DjO39RST0YLrh2oWkVLn4JONiElPSMmzsvdOSssPDk+MistwdA308AnPyCmNisuIjM0ICI2XUtAVEFPB4mxeYSVuQQUeIQUOPpAjOflluQUVeIUVuQTkOPhlIYJYnA1HmIEkDBYUkQIhtDBjGLB4BgDn5UyGLmJm3wAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;better-uptime.png&quot;
        title=&quot;&quot;
        src=&quot;/static/d41d8cd98f00b204e9800998ecf8427e/2bef9/better-uptime.png&quot;
        srcset=&quot;/static/d41d8cd98f00b204e9800998ecf8427e/5a46d/better-uptime.png 300w,
/static/d41d8cd98f00b204e9800998ecf8427e/0a47e/better-uptime.png 600w,
/static/d41d8cd98f00b204e9800998ecf8427e/2bef9/better-uptime.png 1024w&quot;
        sizes=&quot;(max-width: 1024px) 100vw, 1024px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;서비스가 제대로 돌고 있는지 확인하는 방법은 여러 가지가 있다.
DataDog 같은 모니터링 서비스들은 왠만하면 다 알림 기능을 제공하고 있고,
보통 슬랙 / 이메일 등으로 알람이 온다.&lt;/p&gt;
&lt;p&gt;하지만 단순 알람만으로는 부족하다고 느껴질 때가 있다.
다들 자고 있는데 서버가 터지면? 회사 슬랙이나 이메일만으로는 대응하기 매우 어렵다.
그래서 서비스가 장애났을 때 전화를 걸어주는 서비스가 있는지 찾아보았다.&lt;/p&gt;
&lt;h2&gt;AWS Incident Manager&lt;/h2&gt;
&lt;p&gt;AWS CloudWatch 또는 Eventbridge에서 문제가 발생했을 때,
Incident Manager를 통해 자동으로 대응할 수 있다.
전화번호를 등록하면 전화도 받을 수 있다.&lt;/p&gt;
&lt;p&gt;다만, 처음 세팅하는 과정이 복잡해서 번거롭고, AWS 의존적이라는 단점이 존재한다.
원래 AWS를 사용하고 있어서 AWS 의존적이라는 건 큰 문제가 되지 않았으나,
처음 만져보니 감이 잘 안 잡혀서 작업하다 열심히 헤매던 도중, 새 서비스를 사용하기로 했다.&lt;/p&gt;
&lt;h2&gt;Better Uptime&lt;/h2&gt;
&lt;p&gt;이번에 찾은 서비스는 Better Stack이란 회사에서 제공하는 &lt;a href=&quot;https://betterstack.com/uptime&quot;&gt;Better Uptime&lt;/a&gt;이라는 서비스이다.
Better Stack은 2021년에 창업한 신생 회사인데, &lt;a href=&quot;https://betterstack.com/press/series-a/&quot;&gt;22년 7월 경 $18.6M 시리즈A 투자를 받았다&lt;/a&gt;(부럽다).
DataDog 대항마 느낌으로 푸시를 받고 있는 듯 하다.&lt;/p&gt;
&lt;p&gt;Better Uptime은 서비스가 제대로 작동 중인지 모니터링 할 수 있는 서비스이다.
모니터링할 URL을 넣어주면 끝. 아주 간단하게 사용할 수 있다.&lt;/p&gt;
&lt;p&gt;그리고 모니터링 하는 서비스에 이상이 생기면 알람을 해 주는데,
이 때 &lt;strong&gt;전화&lt;/strong&gt; / SMS / Email / 앱 noti 중에서 어떤 걸로 보내줄 지 고를 수 있다.
그렇다. 국제전화로 알람을 받을 수 있다!
프로필에 전화번호 등록을 해 놓으면 간단하게 받을 수 있다.
다른 On-call 서비스처럼 스케줄링 등의 서비스도 당연히 지원한다.
간단하게 모니터링 서비스를 붙이고 싶을 때 꽤나 괜찮은 도구라고 생각한다.
스타트업에서 사용하기 딱 좋은 서비스인듯.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://aws.amazon.com/ko/about-aws/whats-new/2021/05/introducing-incident-manager-aws-systems-manager/&quot;&gt;https://aws.amazon.com/ko/about-aws/whats-new/2021/05/introducing-incident-manager-aws-systems-manager/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://betterstack.com/press/series-a/&quot;&gt;https://betterstack.com/press/series-a/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Elastic Beanstalk에서 Secret Manager 사용하기]]></title><description><![CDATA[Elastic Beanstalk? 우선 AWS 문서를 보자: Elastic Beanstalk를 사용하면 애플리케이션을 실행하는 인프라에 대해 자세히 알지 못해도 AWS 클라우드에서 애플리케이션을 신속하게 배포하고 관리할 수 있습니다. Elastic…]]></description><link>https://mingyu.kim/elasitcbeanstalk-asm/</link><guid isPermaLink="false">https://mingyu.kim/elasitcbeanstalk-asm/</guid><pubDate>Fri, 22 Sep 2023 09:23:21 GMT</pubDate><content:encoded>&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/daab41e4d8504251ad33bddaa5e21607/c1b63/logo-eb-asm.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPUlEQVR42jXL+0tTYRwH4NcdL2k6d3S6M5eZ66J4rRxaeFmppTODUspqdDFIZYUGLsxbKrOrVoYXTmhok5ToQtFNs2y1rAb5/+yc9/1+CH/o+f1hemg7X8sU3zPFSjq9V+i1Fc9t8CuYtmDcjJFk+EzUayRvAnk2ieZo7o7hjVF6naRVGZgesm/kwFbxdScFSulDDhaS4E/9n2UMJ1G/iTqiqEMWrUZ+kvFjBq1O0ioNjP+282CGCOyg9bMUOIAfDViuwTM7VBnjKRhNxrCMRyV0u5DGauneYd6Zy5vTtFqmVUmMB+1iVaH1E7RaREt5WDuHJRdWzmAuCxNpmC5Gj0QPimiylnwO0VMgvAX8Sr5WzbRKiYkvNhF0UKiRPmZi7TRC7Zi3YHYL3jZAzYLqwJAMtYYGd5HaRBNNvC1DdDv1o3GakzH6ZKVvxRSsoz/n8deLXx4ELmHWjldHoOZiai9umGiqhgay6bGbFrv41TzeVaHXx2kVjNG7dHpjxXIZPh/CzxaErmPZDf9uzBRiRMGkg7wG3NlDI04xWCx6S4TPxVvyNCfTnBKjlza8sGHRjKcmLGYhcBlzObi/GXeNuJlEAzJdi6W+baI/X/jKRV8p92TrbfladWS4jDEsWDGvwG/FrAUzClQFDxNxPwW3ZAwkUncCdcaTJ0ZciOAXE3W3UXcx3RWtHZTC+xnbOE8smE6FmooJM8aSMWremEMm6k0gbzy1x4nWWNEcy09F6sclvT5SqzKEyyPC+yL+Ab/RTjT6kGuAAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;logo-eb-asm.png&quot;
        title=&quot;&quot;
        src=&quot;/static/daab41e4d8504251ad33bddaa5e21607/c1b63/logo-eb-asm.png&quot;
        srcset=&quot;/static/daab41e4d8504251ad33bddaa5e21607/5a46d/logo-eb-asm.png 300w,
/static/daab41e4d8504251ad33bddaa5e21607/0a47e/logo-eb-asm.png 600w,
/static/daab41e4d8504251ad33bddaa5e21607/c1b63/logo-eb-asm.png 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Elastic Beanstalk?&lt;/h2&gt;
&lt;p&gt;우선 &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/Welcome.html&quot;&gt;AWS 문서&lt;/a&gt;를 보자:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Elastic Beanstalk를 사용하면 애플리케이션을 실행하는 인프라에 대해 자세히 알지 못해도 AWS 클라우드에서 애플리케이션을 신속하게 배포하고 관리할 수 있습니다. Elastic Beanstalk를 사용하면 선택 또는 제어에 대한 제한 없이 관리 복잡성을 줄일 수 있습니다. 애플리케이션을 업로드하기만 하면 Elastic Beanstalk에서 용량 프로비저닝, 로드 밸런싱, 조정, 애플리케이션 상태 모니터링에 대한 세부 정보를 자동으로 처리합니다.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;위에서 말한 것 처럼, 적당히 세팅만 해 주면 AWS쪽에서 웹 서비스에서 필요한 기능들을 알아서 관리해 주기 때문에 처음 웹 서비스를 만들거나 MVP를 만들 때 사용하기 매우 편하다.
Heroku 같은 서비스보다는 더 많은 부분을 컨트롤할 수 있고, ECS나 EKS처럼 컨테이너를 사용하는 서비스보다는 훨씬 관리해 주는 게 많은 서비스다.
위에 말한 두 서비스의 적당한 절충안을 원하는 사람이라면 좋아할만한 서비스라고 생각한다.&lt;/p&gt;
&lt;p&gt;나는 개인적으로 Elastic Beanstalk(이하 EB)을 사용하는 걸 좋아한다.
간단한 웹 서비스를 배포하는 데에 편리하고 적당히 중요한 기능들 다 있어서,
생각보다 더 쓸만하고 사용하면서 치명적인 단점을 발견한 적은 딱히 없었다.&lt;/p&gt;
&lt;p&gt;그러던 어느날,
그동안 EB를 쓰면서 ASM(AWS Secrets Manager)을 사용할 일이 없었는데,
마침 사용하게 될 일이 생겨서 설정법을 찾아보던 도중 중요한 사실을 하나 깨달았다.&lt;/p&gt;
&lt;h2&gt;Elastic Beanstalk과 ASM을 연결하는 기능은 없다&lt;/h2&gt;
&lt;p&gt;그렇다. 같은 AWS 서비스임에도 불구하고 EB에서 ASM에 있는 시크릿 키를 받아와 사용할 수 있는 방법이 딱히 &lt;strong&gt;없다!&lt;/strong&gt;
EB 외부에서 값을 넣는 방법이 몇 가지 있는데, GUI에서 할 수 있는 방법은 Enviornment 값을 넣는 것이 전부이다.&lt;/p&gt;
&lt;p&gt;문서를 뒤져봐도 &lt;a href=&quot;https://docs.aws.amazon.com/ko_kr/secretsmanager/latest/userguide/integrating_AEB.html&quot;&gt;개인 리포지토리를 호스팅하는 온라인 레지스트리를 사용하여 인증&lt;/a&gt; 하는 방법에 대해서만 이야기할 뿐, EB env안에 ASM 값을 넣는 방법은 나오지 않았고,
내 혈압도 같이 올라갔다.&lt;/p&gt;
&lt;h2&gt;그래도 넣어봅시다.&lt;/h2&gt;
&lt;p&gt;stack overflow를 뒤져보면서 얻은 결론은 &quot;awscli로 커맨드 받아서 직접 넣기&quot; 였다.
awscli를 사용하는 거야 쉽다. 이런 식으로 ASM에서 secret key를 받아올 수 있다:&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;aws secretsmanager get-secret-value --secret-id ${AWS_SECRET_ID} | jq &amp;quot;.SecretString | fromjson | to_entries[] | [.key,.value] | join(\&amp;quot;=\&amp;quot;)&amp;quot; &lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이렇게 하면 json 형태로 받아온 secret key를 .env에서 사용하는 &lt;code&gt;AAA=BBB&lt;/code&gt; 형태로 가져올 수 있고,
파일로 저장하면 된다.
다만 받아온 키를 어디에 넣어야 하는지가 문제인데,
여러가지 방법을 써 본 결과 docker-compose를 이용해 값을 가져오는게 제일 괜찮은 방법이었다.&lt;/p&gt;
&lt;h2&gt;Dockerfile 직접 넣기보다 docker-compose.yml를 사용하자&lt;/h2&gt;
&lt;p&gt;이전에 나는 주로 Dockerfile을 직접 넣어서 빌드를 하는 방식을 주로 사용했다.
소스 코드와 Dockerfile을 넣으면 EB에서 알아서 docker build를 하고 배포를 하는데,
몇 가지 불편한 점이 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;인스턴스 스펙이 낮으면 빌드 시 램 부족으로 터질 수 있다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;EB에서는 docker build도 해당 인스턴스로 하기 때문에,
Frontend 배포 할 때 npm build 등으로 큰 소스들을 빌드하다 보면 OOM이 발생하는 경우가 생각보다 많다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;secret key 넣는 과정에 애로사항이 생긴다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dockerfile만을 사용할 경우 &lt;code&gt;/var/app/current/.env&lt;/code&gt; 값에 secret key를 넣어야 하는데,
EB에서 env 값을 바꿀 떄 &lt;code&gt;.env&lt;/code&gt; 파일을 수정하기 때문에 값이 덮어씌워질 일이 생긴다.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그럼 어떻게 하는 게 좋을까? 쉽다. docker-compose도 지원하기 때문에,
CD 단계에서 docker build를 하고, ECR(Elastic Container Registry)에 docker 이미지를 올려둔 뒤 가져오면 된다.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;여기서 잠깐, 왜 &lt;code&gt;/var/app/current/.env&lt;/code&gt; 일까?&lt;/p&gt;
&lt;p&gt;그걸 알기 위해선 EB가 어떤 구조로 돌아가는지 알 필요가 있다.
EB는 ELB + EC2 + ASG 등을 AWS에서 미리 만들어 둔 CloudFormation 템플릿을 이용해서 배포를 하는 시스템이다.
그래서 EB 자체는 사용료가 부가되지 않지만, EB에서 배포하면서 만들어지는 다른 서비스들에서 비용이 부과가 된다.&lt;/p&gt;
&lt;p&gt;EB에서 생성한 EC2 안으로 들어가 보면,
소스를 받고 가공을 하는 동안은 &lt;code&gt;/var/app/staging/&lt;/code&gt;에서 작업을 하고,
그 후 실행할 땐 &lt;code&gt;/var/app/current/&lt;/code&gt;에서 돌아간다는 것을 알 수 있다.
그러니 빌드 전에 secret key를 해당 디렉토리 안에 넣어서 돌아가게 할 수 있는 것이다.&lt;/p&gt;
&lt;h2&gt;.platform/ script 사용하기&lt;/h2&gt;
&lt;p&gt;EB에서는 코드 배포 전/후에 스크립트를 따로 돌릴 수 있는 방법들을 제공하고 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 566px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 207.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,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&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;eb_steps.png&quot;
        title=&quot;&quot;
        src=&quot;/static/9f4bfac4c06c090bea350551e36083f3/6fe44/eb_steps.png&quot;
        srcset=&quot;/static/9f4bfac4c06c090bea350551e36083f3/5a46d/eb_steps.png 300w,
/static/9f4bfac4c06c090bea350551e36083f3/6fe44/eb_steps.png 566w&quot;
        sizes=&quot;(max-width: 566px) 100vw, 566px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;
(출처: &lt;a href=&quot;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/platforms-linux-extend.html&quot;&gt;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/platforms-linux-extend.html&lt;/a&gt;)&lt;/p&gt;
&lt;p&gt;위 사진과 같이 EB는 배포 시 총 3가지 step을 진행하는데, 중간 중간에 스크립트를 실행할 수 있다.
&lt;code&gt;.platform/&lt;/code&gt; 디렉토리 안에 넣으면 해당 스크립트를 실행할 수 있는데,
우리는 prebuild 단계에서 secret key를 만들어 넣을 예정이다.&lt;/p&gt;
&lt;p&gt;다음과 같은 위치에 파일 두 개를 만들어야 한다.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;.platform/hooks/prebuild/get_secret_key.sh
.platform/confighooks/prebuild/get_secret_key.sh&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;confighooks는 무엇인가? 배포 뿐만 아니라 인스턴스 구성을 바꿀 때(env 값 변경 등)에도 스크립트를 돌릴 수 있다.
confighooks/ 디렉토리에 넣으면 실행 가능하다.&lt;/p&gt;
&lt;p&gt;그럼 스크립트 안에는 어떤 값을 넣어야 하는가?
실행하는 EB 위치에 .secret 파일을 넣어주면 된다.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;#!/bin/bash

$( echo &amp;quot;$(/opt/elasticbeanstalk/bin/get-config environment)&amp;quot; | jq -r &amp;#39;keys[] as $k | &amp;quot;export \($k)=\(.[$k])&amp;quot;&amp;#39; ) # load ElasticBeanstalk env

aws secretsmanager get-secret-value --secret-id ${AWS_SECRET_ID} | jq &amp;quot;.SecretString | fromjson | to_entries[] | [.key,.value] | join(\&amp;quot;=\&amp;quot;)&amp;quot; -r &amp;gt; /var/app/staging/.secret

aws secretsmanager get-secret-value --secret-id ${AWS_SECRET_ID} | jq &amp;quot;.SecretString | fromjson | to_entries[] | [.key,.value] | join(\&amp;quot;=\&amp;quot;)&amp;quot; -r &amp;gt; /var/app/current/.secret&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이 스크립트를 실행하게 되면 &lt;code&gt;/var/app/staging/.secret&lt;/code&gt;, &lt;code&gt;/var/app/current/.secret&lt;/code&gt; 두 곳에 &lt;code&gt;.secret&lt;/code&gt; 파일을 만들게 된다.
두 곳 모두 만들어야 한다. 그렇지 않으면 배포 시 에러가 발생한다.&lt;/p&gt;
&lt;p&gt;그리고 docker-compose에는 다음과 같이 .secret 파일을 읽도록 설정하면 끝.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;version: &amp;#39;3.1&amp;#39;

services:
  app:
    image: {docker image} # ECR에 올린 도커 이미지
    env_file:
      - .env # Elastic Beanstalk에서 Environment 값을 넣으면 들어가는 파일
      - .secret # 아까 만들었던 ASM으로 로드한 secret key
    ... # 나머지 기타등등 설정
&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이렇게 하면 EB + ECR + ASM 조합으로 애플리케이션을 간단하게 배포할 수 있다.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/single-container-docker-configuration.html&quot;&gt;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/single-container-docker-configuration.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/platforms-linux-extend.html&quot;&gt;https://docs.aws.amazon.com/elasticbeanstalk/latest/dg/platforms-linux-extend.html&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://stackoverflow.com/questions/35788499/what-is-the-difference-between-commands-and-container-commands-configuration-key&quot;&gt;https://stackoverflow.com/questions/35788499/what-is-the-difference-between-commands-and-container-commands-configuration-key&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Dev mode에서 Vite는 너무 무겁다]]></title><description><![CDATA[요새 Vite를 사용하는 사람들이 늘고 있다.
인기도 많고 평도 좋아서 나도 써봤는데,
몇 가지 문제점을 발견해서 실제로 적용하는 데에 포기한 경험이 있다.
관련된 내용 복기용으로 정리. Vite의 특징 Vite dev mode…]]></description><link>https://mingyu.kim/vite-dev-cons/</link><guid isPermaLink="false">https://mingyu.kim/vite-dev-cons/</guid><pubDate>Fri, 25 Aug 2023 01:50:21 GMT</pubDate><content:encoded>&lt;p&gt;요새 Vite를 사용하는 사람들이 늘고 있다.
인기도 많고 평도 좋아서 나도 써봤는데,
몇 가지 문제점을 발견해서 실제로 적용하는 데에 포기한 경험이 있다.
관련된 내용 복기용으로 정리.&lt;/p&gt;
&lt;h2&gt;Vite의 특징&lt;/h2&gt;
&lt;p&gt;Vite dev mode로 들어가면 기존 webpack 등의 번들러에서 사용하던 것과는 다른 점을 알 수 있는데,
Typescript 파일들을 그대로 import해서 사용한다. vue 파일들도 그대로 import한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 685px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dd46c3a64d993c1ffd703e691ea48775/8ce22/files.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABx0lEQVR42kWS247bMAxE/f9f10WBFNhN0q5t2bpZV8uWlABTkGnQB8ICYR7NDDV8fhv8GWeEfCKVilwaVu1gXcIkFIS0+D0KbD4j5APjLKGMw00ozLEgxgJtIvLRkPaKYVMzNh/ReketDbV1OBcQU4bdHJwPmCaB/ngi5x2r1DiOA7PeoPKBWk54n3j+rA2DE58YZwFjNEIIeD6f0Pp1llLCWovL5YJSCoOmaUJKCVIppLPCpR05ZjweHa01DMlMMNah1cqN3jvD9n2H9wExJozjyOrO84TWhuEpRhytw8QdOwMfaK1jcOsds1jRW+Mm1bZtDKJhOl8uv/iCUg4sy4qcMzZrsdcGE0hhQn8rDPIFXNcVUiq2SJbfQO89brc7Qwj6zWpfwFQbFpdQUkZnhWTZCmhjoZWCEIIBlBENkXWq6/WGECJnSLkSOMcId5y4W48j7f8V0lK+rncsy8LqYowwxjCAhun84+ODHVCGtBTnHJyxkHvGz1Wi5cJbZmD8p5AUvYtyoy+pDTHyUghMCpVSiCkheI+zd2wxYtKeLdNCB6MEB00/U4OejSPbOXOWlOM8zwxhy0qxZbqUFljLgeu68fslhX8BaS33satQXr0AAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;files.png&quot;
        title=&quot;&quot;
        src=&quot;/static/dd46c3a64d993c1ffd703e691ea48775/8ce22/files.png&quot;
        srcset=&quot;/static/dd46c3a64d993c1ffd703e691ea48775/5a46d/files.png 300w,
/static/dd46c3a64d993c1ffd703e691ea48775/0a47e/files.png 600w,
/static/dd46c3a64d993c1ffd703e691ea48775/8ce22/files.png 685w&quot;
        sizes=&quot;(max-width: 685px) 100vw, 685px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;보이는가? &lt;code&gt;App.vue&lt;/code&gt;, &lt;code&gt;router.ts&lt;/code&gt; 등의 파일들을 그대로 서빙하는 걸 볼 수 있다.&lt;/p&gt;
&lt;p&gt;물론 소스코드를 그대로 보내는 건 아니다. 브라우저는 Typescript를 읽을 수 없다.
그래서 각 파일들의 내용들을 보면 vite가 알아서 잘 번들링 한 것을 볼 수 있다.
그리고 파일이 변경이 되거나 해서 업데이트 할 일이 생기면 그 파일들만 슥슥 바뀌니 편하게 개발할 수 있다.&lt;/p&gt;
&lt;p&gt;좋다. 꽤나 괜찮아 보이는 구조다. 그런데 문제는 여기서부터 발생한다.
웹 페이지가 엄청 커져서 너무 많은 소스 코드 파일들이 있을 때.
소스 코드들이 엄청 불어난 큰 프로젝트일 경우에는 그 소스 파일들을 전부 불러오게 된다.
수천개의 파일들을 로드하게 될 수 있다는 뜻.&lt;/p&gt;
&lt;h2&gt;localhost에서는 상관없지 않나요?&lt;/h2&gt;
&lt;p&gt;그렇다. 어짜피 컴퓨터 내부니까 괜찮다. 몇천개던 몇만개던 큰 문제없이 로드가 된다.
진짜 문제는 다른 기기에서 테스트로 구동할 때.&lt;/p&gt;
&lt;p&gt;예를 들어 SPA인 꽤나 큰 웹 페이지를 아이패드에서 구동을 한다고 생각해보자.
그러면 관련 소스 코드들을 전부 로드해야 하는데, 파일 몇만개씩으로 컴퓨터에서 아이패드로 보내야 한다.
각각의 소스 파일 용량은 크지 않지만, 파일의 갯수가 너무 많기 때문에 쓰로틀링이 걸리게 되고,
그래서 페이지를 로드할 때 엄청나게 오랜 시간이 걸리게 된다.
그러면 10초~20초씩 기다려야 겨우 메인 페이지가 뜨게 되는 참사가 벌어지게 되는 것이다.&lt;/p&gt;
&lt;h2&gt;해결법?&lt;/h2&gt;
&lt;p&gt;Webpack 등 다른 번들러처럼 dev 모드에서 하나의 파일로 묶어서 서빙하도록 하는 방법은 찾지 못했다.
Vite는 다른 툴들과 비교했을 때 생각보다 자유도가 높지 않은 느낌이었다.&lt;/p&gt;
&lt;p&gt;다른 프로젝트에서 번들러를 Vite로 교체할 때 맞닥뜨리게 되는 큰 문제 중 하나라고 생각한다.&lt;/p&gt;
&lt;p&gt;또는 프로젝트 안에서 dynamic import를 구현하거나 하는 방법으로 해결할 수는 있을 것 같다(시도는 안 해 봤지만).&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Go로 짜면 리버싱이 어려운 이유]]></title><description><![CDATA[친구들과 잡담을 하던 도중, 이런 흥미로운 이야기를 들었다. go로 짜면 리버싱이 개어렵긴하더라. go…]]></description><link>https://mingyu.kim/golong-calling-convention/</link><guid isPermaLink="false">https://mingyu.kim/golong-calling-convention/</guid><pubDate>Sun, 06 Aug 2023 11:30:21 GMT</pubDate><content:encoded>&lt;p&gt;친구들과 잡담을 하던 도중, 이런 흥미로운 이야기를 들었다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;go로 짜면 리버싱이 개어렵긴하더라. go가 진짜 개악질인게 우리가 아는 표준 콜링컨벤션을 하나도 안 지킴. 레지스터를 지 맘대로 씀. 심지어 버전마다도 조금씩 다르다니까?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;처음 들어보는 재밌는 이야기여서 확인차 적어보고자 한다.&lt;/p&gt;
&lt;h2&gt;Calling convention이란?&lt;/h2&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; &quot;
    &gt;
      &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACJUlEQVR42nWT3WvTUBjG+4/6N3gvIt54NUG8EwSHqMgUvZm0rKKIYNtNpHNsa7t+bqZfJ81JTj5O0iTtT3Kcdcp84CXk5Jzfm/fJk1K9XqdWq1Eul8314OCARqNBtVrl8PCQ67Rer6+tQqVkuWSZJKRxTKw1aZqayvOc1WplNhX3y+WSLMvM+v9UQEvtk2NOj4/pHB0xn81Qvo9SyjwsQFovkVIynU4JgoAoipjP5wZQNEnSDK31pnlpOraYjC3GYwsh5ijl4XneJewNQfCKPE+p1xtUKmUWi4VpKhc2s+oLRL1iXqSAGuCgN6Tb7jHonzOZCmzbRUqfNM0IgocodZss0+zvf2V3dxchhDmoPBexfYfFzhatVovRaPQL2Gt/4qhZZTDcx7KaTCZNPO8MrSO63Zv0ejdI05DxeEK/3zM+FuP/uLggevsA/90jXM/b+Fhy5AmO00bKFlK28f02YdQ1/vj+fVzvFkkSms22LRgOhwboOAuSD8+JPr9mLoRZS+KY0mzqIoTCkRHOIsRxIqIoJ89XaP0Yre+R54kBxrGm3+8jbBsdRfjVp6iPOwwGAzqdDnEBbHfqnHW/ICanSDlEyj6ed27isV5nrFbyr5wV8oMAz3WZbN/FerllPkjhuRl5ONrj/GIPKWr4QROlvqHUd/I8+zdlG3AYRgRhiHr/DLfyhPwyMiaHliUQtksQFJ4lmypGvgq5Gt7fytewMpP8+VN+ApgCODpMfSPuAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;calling_convention.png&quot;
        title=&quot;&quot;
        src=&quot;/static/7e5de6104d5b24d87669ba922dc54931/c1b63/calling_convention.png&quot;
        srcset=&quot;/static/7e5de6104d5b24d87669ba922dc54931/5a46d/calling_convention.png 300w,
/static/7e5de6104d5b24d87669ba922dc54931/0a47e/calling_convention.png 600w,
/static/7e5de6104d5b24d87669ba922dc54931/c1b63/calling_convention.png 1200w,
/static/7e5de6104d5b24d87669ba922dc54931/d5eae/calling_convention.png 1407w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
    &lt;/span&gt;
&lt;a href=&quot;https://twitter.com/konradkokosa/status/1435142226422779904&quot;&gt;출처&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;말 그대로 &quot;호출 규약&quot;이다. 함수를 호출할 때 어떤 방법으로 진행하는지에 대한 약속들을 정리해 놓은 것.
매개 변수들을 서브루틴에 어떻게 전달할 지, 호출자(caller)가 레지스터의 내용이 보존되기를 원하는지,
서브루틴의 로컬 변수는 어디에 저장해야 할 지, 결과 반환은 어떻게 해야 할 지 등의 다양한 결정들을 해야 하는데,
통일된 호출 규칙을 만들어서 사용하면 훨씬 편하게 서브루틴을 정의하고 사용할 수 있다.&lt;/p&gt;
&lt;p&gt;통일된 호출 규칙을 사용하면, 각 서브루틴이 어떻게 매개변수를 전달해야 하는지를 일일히 살펴 볼 필요가 없고,
컴파일러가 해당 규칙을 따르기 때문에 직접 어셈블리를 짜더라도 서로의 루틴을 호출할 수 있다.&lt;/p&gt;
&lt;h2&gt;직접 알아보자&lt;/h2&gt;
&lt;p&gt;먼저 c로 간단한 코드를 짜 보자:&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;#include &amp;lt;stdio.h&amp;gt;

int sum(int a, int b) {
    return a+b;
}


int main() {
    int a;
    a = sum(1, 1);
    printf(&amp;quot;%d\n&amp;quot;, a);
    return 0;
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;어셈블리로 분석해 보면 다음과 같은 코드가 나온다.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;(gdb) disas main
Dump of assembler code for function main:
   0x0000000000001161 &amp;lt;+0&amp;gt;:     endbr64
   0x0000000000001165 &amp;lt;+4&amp;gt;:     push   %rbp
   0x0000000000001166 &amp;lt;+5&amp;gt;:     mov    %rsp,%rbp
   0x0000000000001169 &amp;lt;+8&amp;gt;:     sub    $0x10,%rsp
   0x000000000000116d &amp;lt;+12&amp;gt;:    mov    $0x1,%esi
   0x0000000000001172 &amp;lt;+17&amp;gt;:    mov    $0x1,%edi
   0x0000000000001177 &amp;lt;+22&amp;gt;:    call   0x1149 &amp;lt;sum&amp;gt;
   0x000000000000117c &amp;lt;+27&amp;gt;:    mov    %eax,-0x4(%rbp)
   0x000000000000117f &amp;lt;+30&amp;gt;:    mov    -0x4(%rbp),%eax
   0x0000000000001182 &amp;lt;+33&amp;gt;:    mov    %eax,%esi
   0x0000000000001184 &amp;lt;+35&amp;gt;:    lea    0xe79(%rip),%rax        # 0x2004
   0x000000000000118b &amp;lt;+42&amp;gt;:    mov    %rax,%rdi
   0x000000000000118e &amp;lt;+45&amp;gt;:    mov    $0x0,%eax
   0x0000000000001193 &amp;lt;+50&amp;gt;:    call   0x1050 &amp;lt;printf@plt&amp;gt;
   0x0000000000001198 &amp;lt;+55&amp;gt;:    mov    $0x0,%eax
   0x000000000000119d &amp;lt;+60&amp;gt;:    leave
   0x000000000000119e &amp;lt;+61&amp;gt;:    ret
End of assembler dump.
(gdb) disas sum
Dump of assembler code for function sum:
   0x0000000000001149 &amp;lt;+0&amp;gt;:     endbr64
   0x000000000000114d &amp;lt;+4&amp;gt;:     push   %rbp
   0x000000000000114e &amp;lt;+5&amp;gt;:     mov    %rsp,%rbp
   0x0000000000001151 &amp;lt;+8&amp;gt;:     mov    %edi,-0x4(%rbp)
   0x0000000000001154 &amp;lt;+11&amp;gt;:    mov    %esi,-0x8(%rbp)
   0x0000000000001157 &amp;lt;+14&amp;gt;:    mov    -0x4(%rbp),%edx
   0x000000000000115a &amp;lt;+17&amp;gt;:    mov    -0x8(%rbp),%eax
   0x000000000000115d &amp;lt;+20&amp;gt;:    add    %edx,%eax
   0x000000000000115f &amp;lt;+22&amp;gt;:    pop    %rbp
   0x0000000000001160 &amp;lt;+23&amp;gt;:    ret
End of assembler dump.&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;일반적으로 리눅스에서는 인자를 rdi에 넣는다.
위 어셈 코드를 보면 esi와 edi(rdi를 반으로 나눈 게 edi다. rdi는 64bit, edi는 32bit)에 각각 값(1)을 넣은 뒤,
sum 함수를 콜하는 것을 볼 수 있다.&lt;/p&gt;
&lt;p&gt;그럼 go로 비슷한 코드를 써 보자:&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;package main
import (
    &amp;quot;fmt&amp;quot;
)
func sum(a int, b int) int {
    return a+b
}

func main() {
    a := sum(1, 1)
    fmt.Printf(&amp;quot;%d\n&amp;quot;, a)
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;어셈블리로 분석해 보면?&lt;/p&gt;
&lt;p&gt;먼저 어떤 함수들이 있는지 보자.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;(gdb) info functions
All defined functions:

File /home/mango/coding/lab/main.go:
        void main.main(void);

File /usr/lib/go-1.18/src/errors/errors.go:
        void errors.(*errorString).Error;

File /usr/lib/go-1.18/src/errors/wrap.go:
        void errors.init(void);

File /usr/lib/go-1.18/src/fmt/format.go:
        void fmt.(*fmt).fmtBoolean;
        void fmt.(*fmt).fmtBs;
...&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;어라? main.go에 함수가 하나밖에 없다. 최적화로 지워진 모양이다.&lt;/p&gt;
&lt;p&gt;main.main을 들어가 보자.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;(gdb) disas main.main
Dump of assembler code for function main.main:
   0x000000000047f460 &amp;lt;+0&amp;gt;:     cmp    0x10(%r14),%rsp
   0x000000000047f464 &amp;lt;+4&amp;gt;:     jbe    0x47f4cf &amp;lt;main.main+111&amp;gt;
   0x000000000047f466 &amp;lt;+6&amp;gt;:     sub    $0x50,%rsp
   0x000000000047f46a &amp;lt;+10&amp;gt;:    mov    %rbp,0x48(%rsp)
   0x000000000047f46f &amp;lt;+15&amp;gt;:    lea    0x48(%rsp),%rbp
   0x000000000047f474 &amp;lt;+20&amp;gt;:    movups %xmm15,0x38(%rsp)
   0x000000000047f47a &amp;lt;+26&amp;gt;:    mov    $0x2,%eax
   0x000000000047f47f &amp;lt;+31&amp;gt;:    nop
   0x000000000047f480 &amp;lt;+32&amp;gt;:    call   0x409820 &amp;lt;runtime.convT64&amp;gt;
   0x000000000047f485 &amp;lt;+37&amp;gt;:    lea    0x7394(%rip),%rcx        # 0x486820
   0x000000000047f48c &amp;lt;+44&amp;gt;:    mov    %rcx,0x38(%rsp)
   0x000000000047f491 &amp;lt;+49&amp;gt;:    mov    %rax,0x40(%rsp)
   0x000000000047f496 &amp;lt;+54&amp;gt;:    mov    0xa2ad3(%rip),%rbx        # 0x521f70 &amp;lt;os.Stdout&amp;gt;
   0x000000000047f49d &amp;lt;+61&amp;gt;:    lea    0x34d94(%rip),%rax        # 0x4b4238 &amp;lt;go.itab.*os.File,io.Writer&amp;gt;
   0x000000000047f4a4 &amp;lt;+68&amp;gt;:    lea    0x166ef(%rip),%rcx        # 0x495b9a
   0x000000000047f4ab &amp;lt;+75&amp;gt;:    mov    $0x3,%edi
   0x000000000047f4b0 &amp;lt;+80&amp;gt;:    lea    0x38(%rsp),%rsi
   0x000000000047f4b5 &amp;lt;+85&amp;gt;:    mov    $0x1,%r8d
   0x000000000047f4bb &amp;lt;+91&amp;gt;:    mov    %r8,%r9
   0x000000000047f4be &amp;lt;+94&amp;gt;:    xchg   %ax,%ax
   0x000000000047f4c0 &amp;lt;+96&amp;gt;:    call   0x478ca0 &amp;lt;fmt.Fprintf&amp;gt;
   0x000000000047f4c5 &amp;lt;+101&amp;gt;:   mov    0x48(%rsp),%rbp
   0x000000000047f4ca &amp;lt;+106&amp;gt;:   add    $0x50,%rsp
   0x000000000047f4ce &amp;lt;+110&amp;gt;:   ret
   0x000000000047f4cf &amp;lt;+111&amp;gt;:   call   0x458980 &amp;lt;runtime.morestack_noctxt&amp;gt;
   0x000000000047f4d4 &amp;lt;+116&amp;gt;:   jmp    0x47f460 &amp;lt;main.main&amp;gt;
End of assembler dump.&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;...이게 뭐지?&lt;/p&gt;
&lt;h2&gt;어지럽다&lt;/h2&gt;
&lt;p&gt;함수가 갑자기 사라진 건 최적화의 영향이라고 생각해서, &lt;code&gt;-gcflags &apos;-N&apos;&lt;/code&gt; 을 사용해서 최적화를 꺼 보았다. 그랬더니...&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;(gdb) disas main.main
Dump of assembler code for function main.main:
   0x000000000047f460 &amp;lt;+0&amp;gt;:     lea    -0x70(%rsp),%r12
   0x000000000047f465 &amp;lt;+5&amp;gt;:     cmp    0x10(%r14),%r12
   0x000000000047f469 &amp;lt;+9&amp;gt;:     jbe    0x47f625 &amp;lt;main.main+453&amp;gt;
   0x000000000047f46f &amp;lt;+15&amp;gt;:    sub    $0xf0,%rsp
   0x000000000047f476 &amp;lt;+22&amp;gt;:    mov    %rbp,0xe8(%rsp)
   0x000000000047f47e &amp;lt;+30&amp;gt;:    lea    0xe8(%rsp),%rbp
   0x000000000047f486 &amp;lt;+38&amp;gt;:    movq   $0x1,0x50(%rsp)
   0x000000000047f48f &amp;lt;+47&amp;gt;:    movq   $0x1,0x48(%rsp)
   0x000000000047f498 &amp;lt;+56&amp;gt;:    mov    0x50(%rsp),%rcx
   0x000000000047f49d &amp;lt;+61&amp;gt;:    inc    %rcx
   0x000000000047f4a0 &amp;lt;+64&amp;gt;:    mov    %rcx,0x38(%rsp)
   0x000000000047f4a5 &amp;lt;+69&amp;gt;:    jmp    0x47f4a7 &amp;lt;main.main+71&amp;gt;
   0x000000000047f4a7 &amp;lt;+71&amp;gt;:    mov    %rcx,0x58(%rsp)
   0x000000000047f4ac &amp;lt;+76&amp;gt;:    lea    0x166e7(%rip),%rcx        # 0x495b9a
   0x000000000047f4b3 &amp;lt;+83&amp;gt;:    mov    %rcx,0x80(%rsp)
   0x000000000047f4bb &amp;lt;+91&amp;gt;:    movq   $0x3,0x88(%rsp)
   0x000000000047f4c7 &amp;lt;+103&amp;gt;:   movups %xmm15,0xa0(%rsp)
   0x000000000047f4d0 &amp;lt;+112&amp;gt;:   lea    0xa0(%rsp),%rcx
   0x000000000047f4d8 &amp;lt;+120&amp;gt;:   mov    %rcx,0x78(%rsp)
   0x000000000047f4dd &amp;lt;+125&amp;gt;:   mov    0x58(%rsp),%rax
   0x000000000047f4e2 &amp;lt;+130&amp;gt;:   call   0x409820 &amp;lt;runtime.convT64&amp;gt;
   0x000000000047f4e7 &amp;lt;+135&amp;gt;:   mov    %rax,0x70(%rsp)
   0x000000000047f4ec &amp;lt;+140&amp;gt;:   mov    0x78(%rsp),%rcx
   0x000000000047f4f1 &amp;lt;+145&amp;gt;:   test   %al,(%rcx)
   0x000000000047f4f3 &amp;lt;+147&amp;gt;:   lea    0x7326(%rip),%rdx        # 0x486820
   0x000000000047f4fa &amp;lt;+154&amp;gt;:   mov    %rdx,(%rcx)
   0x000000000047f4fd &amp;lt;+157&amp;gt;:   lea    0x8(%rcx),%rdi
   0x000000000047f501 &amp;lt;+161&amp;gt;:   cmpl   $0x0,0xd1c08(%rip)        # 0x551110 &amp;lt;runtime.writeBarrier&amp;gt;
   0x000000000047f508 &amp;lt;+168&amp;gt;:   je     0x47f50c &amp;lt;main.main+172&amp;gt;
   0x000000000047f50a &amp;lt;+170&amp;gt;:   jmp    0x47f512 &amp;lt;main.main+178&amp;gt;
   0x000000000047f50c &amp;lt;+172&amp;gt;:   mov    %rax,0x8(%rcx)
   0x000000000047f510 &amp;lt;+176&amp;gt;:   jmp    0x47f519 &amp;lt;main.main+185&amp;gt;
   0x000000000047f512 &amp;lt;+178&amp;gt;:   call   0x45a940 &amp;lt;runtime.gcWriteBarrier&amp;gt;
   0x000000000047f517 &amp;lt;+183&amp;gt;:   jmp    0x47f519 &amp;lt;main.main+185&amp;gt;
   0x000000000047f519 &amp;lt;+185&amp;gt;:   mov    0x78(%rsp),%rdx
   0x000000000047f51e &amp;lt;+190&amp;gt;:   test   %al,(%rdx)
   0x000000000047f520 &amp;lt;+192&amp;gt;:   jmp    0x47f522 &amp;lt;main.main+194&amp;gt;
   0x000000000047f522 &amp;lt;+194&amp;gt;:   mov    %rdx,0xd0(%rsp)
   0x000000000047f52a &amp;lt;+202&amp;gt;:   movq   $0x1,0xd8(%rsp)
   0x000000000047f536 &amp;lt;+214&amp;gt;:   movq   $0x1,0xe0(%rsp)
   0x000000000047f542 &amp;lt;+226&amp;gt;:   movq   $0x0,0x40(%rsp)
   0x000000000047f54b &amp;lt;+235&amp;gt;:   movups %xmm15,0x90(%rsp)
   0x000000000047f554 &amp;lt;+244&amp;gt;:   movq   $0x0,0x68(%rsp)
   0x000000000047f55d &amp;lt;+253&amp;gt;:   movups %xmm15,0xc0(%rsp)
   0x000000000047f566 &amp;lt;+262&amp;gt;:   movups %xmm15,0xb0(%rsp)
   0x000000000047f56f &amp;lt;+271&amp;gt;:   mov    0x80(%rsp),%rcx
   0x000000000047f577 &amp;lt;+279&amp;gt;:   mov    0xd0(%rsp),%rsi
   0x000000000047f57f &amp;lt;+287&amp;gt;:   mov    0xd8(%rsp),%r8
   0x000000000047f587 &amp;lt;+295&amp;gt;:   mov    0x88(%rsp),%rdi
   0x000000000047f58f &amp;lt;+303&amp;gt;:   mov    0xe0(%rsp),%r9
   0x000000000047f597 &amp;lt;+311&amp;gt;:   mov    0xa29f2(%rip),%rbx        # 0x521f90 &amp;lt;os.Stdout&amp;gt;
   0x000000000047f59e &amp;lt;+318&amp;gt;:   lea    0x34cb3(%rip),%rax        # 0x4b4258 &amp;lt;go.itab.*os.File,io.Writer&amp;gt;
   0x000000000047f5a5 &amp;lt;+325&amp;gt;:   call   0x478ca0 &amp;lt;fmt.Fprintf&amp;gt;
   0x000000000047f5aa &amp;lt;+330&amp;gt;:   mov    %rax,0x60(%rsp)
   0x000000000047f5af &amp;lt;+335&amp;gt;:   mov    %rbx,0xb0(%rsp)
   0x000000000047f5b7 &amp;lt;+343&amp;gt;:   mov    %rcx,0xb8(%rsp)
   0x000000000047f5bf &amp;lt;+351&amp;gt;:   mov    0x60(%rsp),%rdx
   0x000000000047f5c4 &amp;lt;+356&amp;gt;:   mov    %rdx,0x68(%rsp)
   0x000000000047f5c9 &amp;lt;+361&amp;gt;:   mov    0xb0(%rsp),%rdx
   0x000000000047f5d1 &amp;lt;+369&amp;gt;:   mov    0xb8(%rsp),%r10
   0x000000000047f5d9 &amp;lt;+377&amp;gt;:   mov    %rdx,0xc0(%rsp)
   0x000000000047f5e1 &amp;lt;+385&amp;gt;:   mov    %r10,0xc8(%rsp)
   0x000000000047f5e9 &amp;lt;+393&amp;gt;:   mov    0x68(%rsp),%rdx
   0x000000000047f5ee &amp;lt;+398&amp;gt;:   mov    %rdx,0x40(%rsp)
   0x000000000047f5f3 &amp;lt;+403&amp;gt;:   mov    0xc0(%rsp),%rdx
   0x000000000047f5fb &amp;lt;+411&amp;gt;:   mov    0xc8(%rsp),%r10
   0x000000000047f603 &amp;lt;+419&amp;gt;:   mov    %rdx,0x90(%rsp)
   0x000000000047f60b &amp;lt;+427&amp;gt;:   mov    %r10,0x98(%rsp)
   0x000000000047f613 &amp;lt;+435&amp;gt;:   jmp    0x47f615 &amp;lt;main.main+437&amp;gt;
   0x000000000047f615 &amp;lt;+437&amp;gt;:   mov    0xe8(%rsp),%rbp
   0x000000000047f61d &amp;lt;+445&amp;gt;:   add    $0xf0,%rsp
   0x000000000047f624 &amp;lt;+452&amp;gt;:   ret
   0x000000000047f625 &amp;lt;+453&amp;gt;:   call   0x458980 &amp;lt;runtime.morestack_noctxt&amp;gt;
   0x000000000047f62a &amp;lt;+458&amp;gt;:   jmp    0x47f460 &amp;lt;main.main&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;...굉장히 쓸데없이 길게 코드가 나오는 걸 볼 수 있다.
일단 sum 함수 자체가 사라졌고(대충 &lt;code&gt;mov    $0x2, %eax&lt;/code&gt;로 최적화 당한 듯 하다),
스택에 값을 엄청 넣었다 뺐다를 반복하고 있다.&lt;/p&gt;
&lt;p&gt;다른 컴파일러들과 비교해서 &lt;a href=&quot;https://dr-knz.net/go-calling-convention-x86-64.html&quot;&gt;어떻게 다른지를 정리한 글&lt;/a&gt;을 찾았다.
해당 글에 의하면, 인자와 반환값은 항상 스택에 들어가고, 따라서 memory-heavy 하다는 의견을 내고 있다.&lt;/p&gt;
&lt;h2&gt;왜 이런 일이?&lt;/h2&gt;
&lt;p&gt;Go는 llvm 기반이 아니다(!). 정확히는 gccgo와 golang-go 두 가지 컴파일러가 있는데, golang-go를 일반적으로 사용한다.
이 컴파일러는 자체 런타임이 결합된 네이티브 머신 코드를 사용한다.
그래서 다른 언어들과 차이가 날 수 밖에 없다.&lt;/p&gt;
&lt;p&gt;따라서, Go로 컴파일 한다는 것은 리버싱을 효과적으로 방해할 수 있는 훌륭한 수단이 되어 버렸다.
앞으로 분석당하기 싫은 프로그램을 만들고 싶다면 Go로 짜 보면 괜찮을지도 모르겠다.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://aaronbloomfield.github.io/pdr/book/x86-64bit-ccc-chapter.pdf&quot;&gt;The 64 bit x86 C Calling Convention&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://go.dev/doc/install/gccgo&quot;&gt;Setting up and using gccgo&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://dr-knz.net/go-calling-convention-x86-64.html&quot;&gt;The Go low-level calling convention on x86-64&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[이 앱이 웹앱인지 아닌지 어떻게 알 수 있을까?]]></title><description><![CDATA[요즘 웹앱이 엄청나게 많이 늘고 있고, PWA도 많이는 안 쓰지만 사용하는 회사들이 그래도 좀 늘어나고 있는 추세다.
가끔 이런 궁금증이 생긴다. 내가 사용하고 있는 이 앱이 웹앱일까? 웹앱이란 뭘까? 말 그대로 WebApp…]]></description><link>https://mingyu.kim/how-to-know-webapp/</link><guid isPermaLink="false">https://mingyu.kim/how-to-know-webapp/</guid><pubDate>Fri, 07 Jul 2023 01:50:21 GMT</pubDate><content:encoded>&lt;p&gt;요즘 웹앱이 엄청나게 많이 늘고 있고, PWA도 많이는 안 쓰지만 사용하는 회사들이 그래도 좀 늘어나고 있는 추세다.
가끔 이런 궁금증이 생긴다. 내가 사용하고 있는 이 앱이 웹앱일까?&lt;/p&gt;
&lt;h2&gt;웹앱이란 뭘까?&lt;/h2&gt;
&lt;p&gt;말 그대로 WebApp, 웹 페이지를 이용한 애플리케이션이다.
애플리케이션 위에 웹 브라우저를 띄운 형태의 앱으로써,
웹 페이지의 큰 장점인 생산성을 활용하기 위해 많이 사용한다.&lt;/p&gt;
&lt;h2&gt;어떻게 알 수 있을까?&lt;/h2&gt;
&lt;p&gt;안드로이드에서 설정에 있는 개발자 옵션을 들어가보자.
없는 경우에는 따로 활성화를 시켜줘야 한다.&lt;/p&gt;
&lt;p&gt;그 후 쭉 내리다 보면 &quot;레이아웃 범위 표시&quot;라는 메뉴를 볼 수 있는데, 켜주자.
그러면 다음과 같이 빨간 줄 파란 줄이 죽죽 뜨기 시작한다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1080px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7c87c4db3961878f22b84ab2d6fbbcf6/47311/settings.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 244.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAxABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAIBAwX/xAAXAQEAAwAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHxcubAKjrNWNFRUpwGjTUJf//EAB0QAAICAQUAAAAAAAAAAAAAAAARAQIhEBIiMDH/2gAIAQEAAQUCRkmthaSclktuYi3vT//EABcRAAMBAAAAAAAAAAAAAAAAAAAQESD/2gAIAQMBAT8BxCP/xAAWEQEBAQAAAAAAAAAAAAAAAAAhACD/2gAIAQIBAT8BI3//xAAZEAACAwEAAAAAAAAAAAAAAAAAMRARITD/2gAIAQEABj8C2NGMdzrFCoXH/8QAIRAAAgMAAQMFAAAAAAAAAAAAAAERITFRECCRQWGBodH/2gAIAQEAAT8hlFPsSXGKRijH5LCQ6i5gumQP2IsxQSrHkbK/QSIYq0RSs/kdPjpUY/I9pR2//9oADAMBAAIAAwAAABCD302L7/z/xAAZEQACAwEAAAAAAAAAAAAAAAARUQAQICH/2gAIAQMBAT8Q68EoSv8A/8QAGBEAAwEBAAAAAAAAAAAAAAAAAAEREGH/2gAIAQIBAT8Qpvexke//xAAhEAEAAgICAgIDAAAAAAAAAAABABEhMUFREHFhkYHB8f/aAAgBAQABPxBrCNaSv6gyCDE9hCZMjzKUcWtdoh5PqKoXQwfuAADoYUgK2Vb3NdMLKDjGviEjNgzjculRbhuopXsBM5rf5hdnG3pCqJ6Oan1Brtms8IOgdEyfzx14/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;settings.jpg&quot;
        title=&quot;&quot;
        src=&quot;/static/7c87c4db3961878f22b84ab2d6fbbcf6/47311/settings.jpg&quot;
        srcset=&quot;/static/7c87c4db3961878f22b84ab2d6fbbcf6/f93b5/settings.jpg 300w,
/static/7c87c4db3961878f22b84ab2d6fbbcf6/b4294/settings.jpg 600w,
/static/7c87c4db3961878f22b84ab2d6fbbcf6/47311/settings.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이것들은 각 애플리케이션들의 컴포넌트 구조를 볼 수 있는 디버깅 정보들로써,
각 네모 박스들이 전부 컴포넌트이다.
이 때, PWA(Progressive Web App: 순수 웹으로 만드는 애플리케이션)를 들어가 보면?&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1080px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/73083f2046b59e7c3e57842ff26b03bc/47311/lichess.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 244.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAxABQDASIAAhEBAxEB/8QAGAABAQEBAQAAAAAAAAAAAAAAAAECAwX/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQP/2gAMAwEAAhADEAAAAfIdrHF0LbzqVkrOs1VHOGmuhX//xAAaEAABBQEAAAAAAAAAAAAAAAAAARARIEEh/9oACAEBAAEFAjrYKYLeSa//xAAVEQEBAAAAAAAAAAAAAAAAAAAgEf/aAAgBAwEBPwEQf//EABcRAAMBAAAAAAAAAAAAAAAAAAAQESD/2gAIAQIBAT8BxCP/xAAUEAEAAAAAAAAAAAAAAAAAAABA/9oACAEBAAY/Ai//xAAeEAABBQACAwAAAAAAAAAAAAAAARARITFRYYGx8P/aAAgBAQABPyGFUTucSlsnLNMw0yx032lHkpvo0TKC6yYf/9oADAMBAAIAAwAAABCvLoIw3/z/xAAZEQABBQAAAAAAAAAAAAAAAAARAAEQIFH/2gAIAQMBAT8QNCxB5//EABkRAAMAAwAAAAAAAAAAAAAAAAAQEQEhUf/aAAgBAgEBPxDZcuiuP//EACAQAQEAAwABBAMAAAAAAAAAAAERACExgRBhceGRobH/2gAIAQEAAT8QRRGHC/WAaIvtiqUINt7+ssHLirQidyrrnTsxqLJita8YBrR+MU6fCY/GPOmLXDGv2zTNEeYqFwQJ/M7enLP/2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;lichess.jpg&quot;
        title=&quot;&quot;
        src=&quot;/static/73083f2046b59e7c3e57842ff26b03bc/47311/lichess.jpg&quot;
        srcset=&quot;/static/73083f2046b59e7c3e57842ff26b03bc/f93b5/lichess.jpg 300w,
/static/73083f2046b59e7c3e57842ff26b03bc/b4294/lichess.jpg 600w,
/static/73083f2046b59e7c3e57842ff26b03bc/47311/lichess.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;커다란 네모 박스 하나밖에 보이지 않는다. PWA는 웹을 보여주기 위한 WebView 하나만 뜨기 때문이다.
이런 식으로 각 애플리케이션들이 어떤 방식으로 구성되어 있는지 쉽게 알 수 있다.&lt;/p&gt;
&lt;p&gt;다른 앱도 확인해 보자. 토스는 어떨까?
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1080px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/76e859556fba71cce628e4d6ba3bc65b/47311/toss_main.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 244.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAxABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAMBAgQF/8QAFwEAAwEAAAAAAAAAAAAAAAAAAAECA//aAAwDAQACEAMQAAAB+RvHpHBi7pSHBnRh6UlTmYCtNDYB/8QAHBAAAQUAAwAAAAAAAAAAAAAAAQADEBFBAhMg/9oACAEBAAEFAqsAERrzPUggOCIbMZGas8//xAAXEQEBAQEAAAAAAAAAAAAAAAABABAx/9oACAEDAQE/AYJI5g7/AP/EABgRAAIDAAAAAAAAAAAAAAAAABARICFh/9oACAECAQE/AXaDyX//xAAdEAABAwUBAAAAAAAAAAAAAAABABAxAhEgISIz/9oACAEBAAY/AsB1e7dVEL0qWlDwHjL/xAAfEAACAgIBBQAAAAAAAAAAAAABEQAhMUEQIFFhccH/2gAIAQEAAT8hdn2Frxu4biaTXvUphDhYeBMgRYYhABLMQ1gvfAjYjE72eVJtuK5fbo//2gAMAwEAAgADAAAAENQLAUQPfv/EABoRAAMBAAMAAAAAAAAAAAAAAAABETEQUWH/2gAIAQMBAT8Q9ENUq9MiPoguf//EABgRAQEBAQEAAAAAAAAAAAAAAAEAEUEQ/9oACAECAQE/EEgXYNLJxEisOHv/xAAfEAEAAgICAwEBAAAAAAAAAAABABEhMUFxEIGxUcH/2gAIAQEAAT8Qwi0FBoV6mgEuAM+4sW6orUwhVrVvcqIyA1iT6T6S72FxZKC5FWGiBTW4Uq5bLRgc/s9s0lC3Um9dkq9zeuIbe+NRvtAVP7wdYjiadWH8jRaw78fnj//Z&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;toss_main.jpg&quot;
        title=&quot;&quot;
        src=&quot;/static/76e859556fba71cce628e4d6ba3bc65b/47311/toss_main.jpg&quot;
        srcset=&quot;/static/76e859556fba71cce628e4d6ba3bc65b/f93b5/toss_main.jpg 300w,
/static/76e859556fba71cce628e4d6ba3bc65b/b4294/toss_main.jpg 600w,
/static/76e859556fba71cce628e4d6ba3bc65b/47311/toss_main.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;메인 페이지는 앱으로 만들어진 것을 볼 수 있다.
하지만 토스페이나 토스증권을 보면...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1080px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/67477c7bcccac219303b91fa8dd3a050/47311/toss_pay.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 244.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAxABQDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAIBAwQF/8QAFwEBAQEBAAAAAAAAAAAAAAAAAAIDAf/aAAwDAQACEAMQAAAB+RN4SwVddNI8ikWm9OajtjTUD//EABsQAAMBAQADAAAAAAAAAAAAAAECEQAQICFB/9oACAEBAAEFAvl119HlOdCnAqQhDmgPZpp4f//EABcRAAMBAAAAAAAAAAAAAAAAAAAQERL/2gAIAQMBAT8BWlCP/8QAFhEBAQEAAAAAAAAAAAAAAAAAEBES/9oACAECAQE/ATDH/8QAHhAAAQQBBQAAAAAAAAAAAAAAAAEQETFBAiEiMDP/2gAIAQEABj8CtHSjDpOW31HpJxWSun//xAAgEAADAAEDBQEAAAAAAAAAAAAAAREhMUFRECBhgaHR/9oACAEBAAE/IX+YTIbMjNp8ZETevoMkoaYYXo6ri90Rq8ciwwckUW5/SYuxIew+Den0fY//2gAMAwEAAgADAAAAEG/+TMfPfv/EABoRAAIDAQEAAAAAAAAAAAAAAAARARAhUeH/2gAIAQMBAT8QdTrwjYYw3L//xAAaEQADAAMBAAAAAAAAAAAAAAAAAREQIUGR/9oACAECAQE/ECi056hqOEZWf//EACAQAQACAQQCAwAAAAAAAAAAAAEAEUEQITFhUZFxsfD/2gAIAQEAAT8QC2Wrc339TPNZI4IpRT3Bg4aBsVt7uYEQr7UQU0I9kKg7VUZPQsdaLrU+BnFuUeBOOD9pYYjgeYXYDRpazFKkpgqHA9MMASIUT8ruJeXtdPGn/9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;toss_pay.jpg&quot;
        title=&quot;&quot;
        src=&quot;/static/67477c7bcccac219303b91fa8dd3a050/47311/toss_pay.jpg&quot;
        srcset=&quot;/static/67477c7bcccac219303b91fa8dd3a050/f93b5/toss_pay.jpg 300w,
/static/67477c7bcccac219303b91fa8dd3a050/b4294/toss_pay.jpg 600w,
/static/67477c7bcccac219303b91fa8dd3a050/47311/toss_pay.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; &lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1080px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/230c115e6ef54273a0978db2b2788331/47311/toss_stock.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 244.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAxABQDASIAAhEBAxEB/8QAGQABAAMBAQAAAAAAAAAAAAAAAAECAwQF/8QAFgEBAQEAAAAAAAAAAAAAAAAAAAED/9oADAMBAAIQAxAAAAHyIvqc6FW0zqgSzFrW5pFxpqB//8QAHBAAAwACAwEAAAAAAAAAAAAAAAERAhAgITFB/9oACAEBAAEFAvlKIyQ/Ux50ZOtTTJqcP//EABcRAAMBAAAAAAAAAAAAAAAAAAAQESD/2gAIAQMBAT8BxCP/xAAXEQADAQAAAAAAAAAAAAAAAAAAEBEg/9oACAECAQE/AcQj/8QAGxAAAQQDAAAAAAAAAAAAAAAAAQIQETEgITD/2gAIAQEABj8CsYCA+kw19P/EAB8QAAICAQQDAAAAAAAAAAAAAAABESExECBBoVFxgf/aAAgBAQABPyGJ6QmXI2FbhIpowrvOlRzQpegWZyr4MsdEoXqcijx2Uehqct4ra//aAAwDAQACAAMAAAAQ/N5DgA9+/8QAGREBAAIDAAAAAAAAAAAAAAAAARARAEFR/9oACAEDAQE/EIQW4Voy3J//xAAXEQEBAQEAAAAAAAAAAAAAAAABEQAQ/9oACAECAQE/ENXChOVq7//EACAQAQACAgICAwEAAAAAAAAAAAEAESFRMUFhcRCBsaH/2gAIAQEAAT8QVa4smd/k2IvIMVzDQWpC80+Vtz8IhgbEgQanK1uLJx7mFZxbYhdFhfa1BalHyNxNqoaNj1FSm7vCDoDHTcOLnj+9Si5mQAy69eYq8F/fxr4//9k=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;toss_stock.jpg&quot;
        title=&quot;&quot;
        src=&quot;/static/230c115e6ef54273a0978db2b2788331/47311/toss_stock.jpg&quot;
        srcset=&quot;/static/230c115e6ef54273a0978db2b2788331/f93b5/toss_stock.jpg 300w,
/static/230c115e6ef54273a0978db2b2788331/b4294/toss_stock.jpg 600w,
/static/230c115e6ef54273a0978db2b2788331/47311/toss_stock.jpg 1080w&quot;
        sizes=&quot;(max-width: 1080px) 100vw, 1080px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 WebView를 이용하여 구성되어 있다.
메인 페이지는 앱이지만 다른 부분은 웹이 매우 많은 부분을 차지하는 걸 볼 수 있다.
다만 리액트 네이티브는 네이티브 컴포넌트를 쓰기 때문에 디버깅 화면에 수많은 컴포넌트들이 보일 것이다.&lt;/p&gt;
&lt;p&gt;이런 식으로 내가 사용하고 있는 이 앱이 웹앱인지 찾아보는 재미가 쏠쏠하다.
찾다보면 의외의 앱들이 웹앱인 걸 볼 수 있을지도 모른다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Node.js에서 aws s3 업로드를 하면 터진다? - aws sdk 이슈]]></title><description><![CDATA[개발 중 발생했던 골치 아팠던 이슈 복기용으로 적는다. 발단 Node.js에서 aws sdk를 이용해 S3에 파일을 업로드 할 일이 생겼다.
적당히 개발 후 돌려보는데 Node.js단에서 자꾸 크래시가 나는 일이 계속되었다. Assertion…]]></description><link>https://mingyu.kim/aws-s3-node/</link><guid isPermaLink="false">https://mingyu.kim/aws-s3-node/</guid><pubDate>Fri, 30 Jun 2023 01:30:21 GMT</pubDate><content:encoded>&lt;p&gt;개발 중 발생했던 골치 아팠던 이슈 복기용으로 적는다.&lt;/p&gt;
&lt;h2&gt;발단&lt;/h2&gt;
&lt;p&gt;Node.js에서 aws sdk를 이용해 S3에 파일을 업로드 할 일이 생겼다.
적당히 개발 후 돌려보는데 Node.js단에서 자꾸 크래시가 나는 일이 계속되었다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;log&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;[1] /Users/mango/.nvm/versions/node/v16.9.0/bin/node[56951]: ../src/node_http_parser.cc:517:static void node::(anonymous namespace)::Parser::Execute(const FunctionCallbackInfo&amp;lt;v8::Value&amp;gt; &amp;amp;): Assertion `parser-&amp;gt;current_buffer_.IsEmpty()&amp;#39; failed.&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;&lt;code&gt;Assertion &apos;parser-&gt;current_buffer_.IsEmpty()&apos; failed.&lt;/code&gt; ???&lt;/p&gt;
&lt;h2&gt;이게 웬 에러야&lt;/h2&gt;
&lt;p&gt;대체 이게 무슨 에러지 하고 찾아보았는데, 다음과 같은 &lt;a href=&quot;https://github.com/aws/aws-sdk-js-v3/issues/2843&quot;&gt;Opened Issue&lt;/a&gt;가 있었다.
Opened Issue만 보면 머리가 지끈거리기 시작하면서 어지러워진다.
심지어 만들어진 지 1년이 넘은 이슈다. 대체 무슨 문제길래?
여튼 한 번 내용을 보자.&lt;/p&gt;
&lt;p&gt;S3로 대용량 파일을 올리려다 발생한 에러라고 한다.
로컬 머신에서는 잘 작동하는데, EKS로 올린 EC2에서는 data size 관계 없이 항상 발생한다고 한다.
대체 왜 그럴까?&lt;/p&gt;
&lt;p&gt;밑의 의견들을 보니, 파일 사이즈를 정확히 5MB으로 올렸을 때, Multipart Upload chunk를 2개를 만드는데,
첫번째 chunk에 데이터가 5MB 다 들어가고 두번째 chunk가 텅텅 빈 채로 body에 들어가게 되면서 문제가 생긴다는 주장이 있다.
그런데 왜 0 byte body를 받는다고 죽는 걸까?&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;더 자세한 문제를 보기 위해 Node.js쪽을 보자. 여기에도 &lt;a href=&quot;https://github.com/nodejs/node/issues/39671&quot;&gt;관련 이슈&lt;/a&gt;가 올라와 있다.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Basically the AWS server sends first a HTTP/1.1 100 Continue as requested and then the HTTP 200 OK.&lt;/p&gt;
&lt;p&gt;If the two messages are received too closely (less than 5ms away) then the execute is somehow called on the same parser before the previous call even returns.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Node.js가 &lt;code&gt;100 Continue&lt;/code&gt;와 &lt;code&gt;200 OK&lt;/code&gt;를 짧은 시간(5ms) 이내에 동시에 받게 되면 제대로 파싱하지 못하고 죽기 때문이다.
이제 5MB 파일을 업로드하며 테스트했던 사람의 케이스가 이해가 되기 시작한다.
용량이 0인 chunk라면 처리 속도가 매우 빠를 테니 짧은 시간 내에 두 개 이상의 chunk response를 받게 될 가능성이 올라가고,
한 번이라도 그런 문제가 발생하는 순간 Assertion crash.
경험상 어떤 크기의 파일이라도 여러번 시도하다 보면 한 번씩 터졌기 때문에, 무조건 터질 가능성이 있다고 봐야 했다.&lt;/p&gt;
&lt;h2&gt;고쳐주세요&lt;/h2&gt;
&lt;p&gt;AWS SDK쪽에선 고칠 생각이 없었고(생각해보면 당연하다. Node.js의 버그인데 AWS쪽에서 고칠 이유가?),
다행히도 Node.js쪽에서 &lt;a href=&quot;https://github.com/nodejs/node/pull/43369&quot;&gt;패치&lt;/a&gt;를 했기 때문에,
해당 버전 이상(v18.6.0+, v16.17.0+)의 Node.js에서는 위 버그가 일어나지 않는다.&lt;/p&gt;
&lt;p&gt;생각해보면 꽤 위험한 서버 취약점이 될 수도 있는 버그같다.
사용자 입력 주소로 요청을 보내는 서버라면, 그 서버를 죽일 수 있는 것 아닌가?
지금은 고쳐져서 정말 다행이다.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/aws/aws-sdk-js-v3/issues/2843&quot;&gt;https://github.com/aws/aws-sdk-js-v3/issues/2843&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/nodejs/node/issues/39671&quot;&gt;https://github.com/nodejs/node/issues/39671&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/nodejs/node/pull/43369&quot;&gt;https://github.com/nodejs/node/pull/43369&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Colorpicker 만들기]]></title><description><![CDATA[색상 선택을 하기 위한 UI를 만들 때, 보통 Color picker를 만드는 경우가 많다.
널리 알려진 UI기 때문에 여러 다양한 Color picker 라이브러리들과 예제들을 볼 수 있다.
 심지어 이젠 브라우저 기본 input…]]></description><link>https://mingyu.kim/color-picker/</link><guid isPermaLink="false">https://mingyu.kim/color-picker/</guid><pubDate>Fri, 16 Jun 2023 02:55:21 GMT</pubDate><content:encoded>&lt;p&gt;색상 선택을 하기 위한 UI를 만들 때, 보통 Color picker를 만드는 경우가 많다.
널리 알려진 UI기 때문에 여러 다양한 Color picker 라이브러리들과 예제들을 볼 수 있다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 845px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/33a6c1f9f8fa0df92e09ffa482459346/8bd7c/picker.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 83.66666666666667%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEIElEQVR42n2RfUzUdRzHf7VqunQ92Nqov6y2RpZrztUibS7XZsutTFL/YMjWzLmZNmWoHEXBkvN4OB7uiYfjhHuA4+BQBAQHKA9ygICoQId33AHHg3IPgHBQUb7a71ia2fpu772/n32/n/f3/f5+hLTSPP4PqSW5/1nLLVoyLAWkWwpIteQjs+STas5DOGNQITWokJk0IT5jUK+wUf2gWeS/97ISDTkWHRevt6K5UcOJPgP7+hRsupnEgeo0hMTcNI7LfuCEPBmJIgWJQkpcRhKnsk8/IvgIF6tIzEjh64yT7JAf5u2MaFanfca+gngE8ZLoSnSaatIgM6of1KLrfzoUIcZMVKfy/pYI3vpgM29+uIn1295hbcTrRCV+iyDVK0kqzCRZlxXin4tyOB2CghS98jF3YuSsskIaGxpprcskt+Msp5Ut1KVUUHzOgCA3F6AoL0JZUYTKWkxayLEKmVHzcCAlD4ci/m1ulYk/uY+4gstLBIJBlpZ+pdbWhFBcW059axOXu6/SYGtBXWVEWqImvTT/sYmniw5NGjTnDMzMzRKYnWHa6yW4GGR+YQFLUw3CGZM6FE2mV5Ou15BjyCfTuBJRPJP+CylGFVKjGrlZi7xMi7pST5alkMwyLenmfISKK7V0uPspd7ahcV4iwVWB7JaVHHMhlzvbaO/por27k47uLjp7rtHe3k7T1WbabnTRc7OP1u4OWrpttPV0or1QilB1pZ6ytoucatbyZbOMsJYj7O7KINdchN3tpM/nomq6F/V0M4l3q9k9p0dlK8WpsqKrr8BhH2LY4WTE5cZUV4mgqyzhQOxRdh6LIeLkHp4/to2v8k6SZzWEXi+93kByr5mY6xq29Up5ZvAQB8uN5HxexHN7N2Dr7MLpcHD7tmNFMEur5I3wV1j37npeCA/nqVdf5Isj0RTWlGE5byX5bDaH9VJ26eOJ0H/HS8ZIPi7Ukiy3ozJl0dt3E5fLhdvlwlhrRbhQU0H9JRlJTTp+ktVREJdNVrESzXkTilwV0bGH2CX5hq2SKDYkRLL2+FbeMyaSPzXCzIiHwSE7DocD17ALfU05QmtfF/wG/P4Hy/fnmV9ewu0Zx1Bv5cfkJD7a+QkRe3awce92Xtu3hVWfbmS7JpKyubOM/uJhwD6A2+1mbHSU8oZqhDvOcabsTUxN2Oi2N+C+5iJwe5l7C/fYHxPDE6ueZk3YOp58eQ1C2LMIqwWiDm7G71Qw5LzD4OAtnE5nSHR0bAzBM+GlxzNCv70Hm83GxPgEAX+AmZkZdDodsbGxSL5P4JQknvgECUfj4jApM5m82ojd5Wag/xZDQ0MMDw/j8XgQAgE/c6JAYJbZ2Vn8fj8+nxefzxeqFxcXCS4ECQZXsDA/z7TPz/hdL5OTE0xNTYUwOTmJ1+vlLy+74XcMyNgmAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;picker.png&quot;
        title=&quot;&quot;
        src=&quot;/static/33a6c1f9f8fa0df92e09ffa482459346/8bd7c/picker.png&quot;
        srcset=&quot;/static/33a6c1f9f8fa0df92e09ffa482459346/5a46d/picker.png 300w,
/static/33a6c1f9f8fa0df92e09ffa482459346/0a47e/picker.png 600w,
/static/33a6c1f9f8fa0df92e09ffa482459346/8bd7c/picker.png 845w&quot;
        sizes=&quot;(max-width: 845px) 100vw, 845px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;심지어 이젠 브라우저 기본 input 타입으로도 제공한다.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;&amp;lt;input type=&amp;quot;color&amp;quot; value=&amp;quot;#e66465&amp;quot;&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 250px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/57541aead5f41949f826ac66ae8f8348/63868/input_color_picker.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 119.6%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFM0lEQVR42o2VW2hUVxSGd0U0mppRczHOJDFiVAxOVTQyJCheY0QcI8UIBvOiHC1WabTqi0N8EOvlQUSO+KBIIojIKMRYbKiXVse0trFRqGKcqE0yZrxMZjKXM5dz5sxXTi5qig9d8LH3Wvvs/+y9WawlQqEQPV4vb96+xev10tfXh2GpVOojuv7/SKUQnc+f0/pdLe279/D4+72429oGBBluqc/EPmfipdvN7/X1tDU08Mf58zx/+BBdUVADAVS/H9XnQ333Dt68Qe/pQfV4ULu7UTs7UV+9Qn3xArWjA/XZM5KKgvD19hIMBAh1dxN68oTw3buEm5oIX7xI6MwZwsePE3I4+K22lvatW4lu2ECoooJQWRlhq5VwYSHh7GxCQhC7fRvR1dVF+6NHdLS04G5uxn31Ku4LF3CfPo372DE66upw19bSuG0bd6ureWW383zZMtwLF+IuLsZdUEBHdjbtQhA0BNvb2/mluRnXtWu4Ll7EdfYsrpMncR0+jOvAAe7V1uKSJFqqq7lfWcm98nJcZWW45s7FNWMGLosFV2YmvwqBzxBsa2vjUkMDV86dw3nqFM6jR3EePIhz3z6cO3fi3LIF56ZNOCsrca5ahXPRIpwLFuAsLsY5dSrO3FyuTJjAJSHoMQRbWlo4cewYp48cQa6rQ963D3nXLmRJQq6pQa6qQl67FnnlSuRFi5BLSpCtVuTp05Hz8pCzsjhtMnFCCDoNwZs3b7J/927q9uzBsWMHjq1bcWzejKOqCse6dTgqKnAsXYqjtBTH/Pk4rFYcM2bgmDIFR24ujgkTqBs3jv1C0GEINjU1UVNdzfaaGqSNG5HWr0daswapvBxpyRKksjKkkhKkOXOQiouRioqQpkxBmjwZKTMTKSOD7enp1AjBU0Pw8uXLlC9fTuXq1axbvhz74sXYS0uxL1yIfd487FYr9lmzsBcVYS8sxJ6Xh33SJOyZmdhNJuxjx1I5ZgzlQvDYEKyvr2fO7NmUlpRgmzsXm9WKrbgY28yZ2IqKsE2diq2gAJvFgi03F1t2NraJE7GZTNjS07GlpVGalsZXQtB65w5ClmVMGRnkm82Yc3IwT5yIefz4ATIyMH85DnN6OuYxYzCPTsM8ahTmkSMxjxiB+QuBWQjyhcAkBPdv3RoQHG8ykZ+fj8VsJr+wkPxp08ibPBnLpElYcnMHRoOcnEGysWQbZGHJyqIgJ4fxo0dz/949hM/nIx6PE4/FUBIJfK2teJuuEwmFiCSTKIkYUVUhoSmoCQU1qqAqMdSoSkzRUKIaSkIjEo0Si8UQiqIQ7Ovj+o0baP4A3h3f8nr91wRv3SF59BCsb8BfnuTgClixFyo6oZyfsVPFVVbCPyvgUBW886OSQkQiEV57PHhevyaVSNBz+Ac8278h8vcTtMdt6D8+RWnUeNCYovF+iqZgikY6uZ78iQ6uoQcbSf3ZTCoSJaFpiKGCaljSqHmqStznQwPUwdiAaQMkVdAHQ4mPU6NWJhIJRDAYRNd1kskkwT4/D/9q462vl6Sm9dP3/h2tDx7i7wsRT2hoeooXXS958uwZekpD0wzVZH+1/iBoOJqmoUTCeLq7+9uAqqqomkZMieDp9hAxiq6q9v/EH/Dz/r2vf4/BUMsYJmiccGgchq6jpwZ6xqfxoVvpg71kmOCn1tnVRTiifPD1ZJxXnV3DvvG+8fK+t7d//ul+4wYiEAj0588Q0WhsmG9gZMLQPB6LY6SagZG/xvhhLR5HGMfuf69BjDf51P9cbOjt/rtmXP9fPJeneHZH/qgAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;input_color_picker.png&quot;
        title=&quot;&quot;
        src=&quot;/static/57541aead5f41949f826ac66ae8f8348/63868/input_color_picker.png&quot;
        srcset=&quot;/static/57541aead5f41949f826ac66ae8f8348/63868/input_color_picker.png 250w&quot;
        sizes=&quot;(max-width: 250px) 100vw, 250px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
생각보다 더 그럴듯하다.&lt;/p&gt;
&lt;p&gt;만약 JS로 color picker를 직접 구현한다고 결정했다면,
만드는 방법은 크게 두 가지가 있다&lt;/p&gt;
&lt;h2&gt;첫 번째&lt;/h2&gt;
&lt;p&gt;canvas로 그린다.
색을 선택할 때는 그냥 canvas에서 픽셀로 읽으면 색을 잘 뽑을 수 있다.&lt;/p&gt;
&lt;deckgo-highlight-code   &gt;
          &lt;code slot=&quot;code&quot;&gt;const canvas = document.getElementById(&amp;quot;canvas&amp;quot;);
const gl = canvas.getContext(&amp;quot;webgl&amp;quot;);
const pixels = new Uint8Array(
  gl.drawingBufferWidth * gl.drawingBufferHeight * 4
);
readPixels(x, y, width, height, format, type, pixels)&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;h2&gt;두 번째&lt;/h2&gt;
&lt;p&gt;div css로 그린다.
&lt;code&gt;liner-gradient&lt;/code&gt;를 이용하면 색상의 명암을 줄 수 있다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;css&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;background: linear-gradient(
    to right, 
    rgb(255, 255, 255), 
    rgba(255, 255, 255, 0)
);

background: linear-gradient(
    to top,
    rgb(0, 0, 0),
    rgba(0, 0, 0, 0)
);&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이런 식으로 주어진 단색에 하얀색과 검은색을 시작으로 alpha 값을 0으로 끝나게 설정하면, 그라디언트를 구현할 수 있다.
대신 색을 선택할 땐 좌표를 기반으로 계산한 값을 줘야 한다.&lt;/p&gt;
&lt;h2&gt;어떤 방법이 더 좋을까?&lt;/h2&gt;
&lt;p&gt;나는 두 번째 방법(css)을 더 선호한다. 왜냐하면 Hue color에 따라 내부 색을 바꿀 때,
렌더링이 무거운 페이지의 경우 canvas에 그릴 때 문제가 발생할 수 있기 때문이다.
색이 휙휙 바뀔 때마다 계속 canvas 페인팅을 하느라 중간중간 깨지는 현상이 발생하는 경우가 있다.
다른 canvas에서 무거운 작업을 할 때 발생할 확률이 올라간다.&lt;/p&gt;
&lt;p&gt;하지만 두 번째 방법은 그럴 일이 거의 없다. 다만 색을 선택할 때 이것저것 계산하는게 귀찮긴 한데,
그래도 잘 작동하니까 사용하지 않을 이유가 없다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Javy를 왜 만든 걸까?]]></title><description><![CDATA[GeekNews를 보던 중 Javy라는 물건을 발견했다. Javy? JS 코드를 웹 어셈블리(이하 WASM)에서 돌릴 수 있도록 만들어 주는 툴 체인이다.
JS 코드를 가져온 뒤, WASM에 임베드 된 JS 런타임으로 실행을 하며,
dynamic…]]></description><link>https://mingyu.kim/what-is-javy/</link><guid isPermaLink="false">https://mingyu.kim/what-is-javy/</guid><pubDate>Fri, 09 Jun 2023 15:46:21 GMT</pubDate><content:encoded>&lt;p&gt;&lt;a href=&quot;https://news.hada.io/topic?id=9289&quot;&gt;GeekNews&lt;/a&gt;를 보던 중 &lt;a href=&quot;https://github.com/bytecodealliance/javy&quot;&gt;Javy&lt;/a&gt;라는 물건을 발견했다.&lt;/p&gt;
&lt;h2&gt;Javy?&lt;/h2&gt;
&lt;p&gt;JS 코드를 웹 어셈블리(이하 WASM)에서 돌릴 수 있도록 만들어 주는 툴 체인이다.
JS 코드를 가져온 뒤, WASM에 임베드 된 JS 런타임으로 실행을 하며,
dynamic linking을 사용하면 아주 작은 크기의 웹어셈 모듈을 만들 수 있다고 한다.
즉, JS 코드를 가져와서 WASM 위에 올리고, 그걸 다시 node로 돌릴 수 있다는 뜻이다!&lt;/p&gt;
&lt;p&gt;....??&lt;/p&gt;
&lt;h2&gt;대체 왜 이런 짓을 하는가?&lt;/h2&gt;
&lt;p&gt;처음 보면 이해가 잘 안 되는 광경일 수 있다. 사실 나도 그랬다.
기껏 JS로 코드를 짜놓고 WASM 모듈로 올린다니? 그냥 JS로 쓰면 되잖아?
그 이유를 알기 위해 Javy의 역사를 잠시 훑어 볼 필요가 있다.&lt;/p&gt;
&lt;p&gt;Javy는 원래 Shopify에서 만든 오픈소스 프로젝트였다.
그 뒤, 현재는 &lt;a href=&quot;https://bytecodealliance.org/&quot;&gt;Bytecode Alliance&lt;/a&gt;에서 관리하고 있다.
Shopify는 온라인 이커머스 플랫폼으로,
쇼핑몰을 간단하게 만들 수 있도록 도와주는 일을 주로 하고 있다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/1a28242ce5be02f2f6a3070e75f0d136/c1b63/shopify_logo.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABb0lEQVR42o2S30vCUBTH/Wt6q3/EhhQJUexBSfeS4JMIQY89KPTSS7JgzMIJoTMJwpdelpmCSRN/5CIVjSm0RWjobPeesK2xfPL7dM/l+znn3nOOA2zCgDFgWFoOE8NYR5qOtH+5MF4IMcYIoUUYABpyrvgaV8fyrw8hhAyrJSOXcWmcTbjcTV6W92lhM8Q6pbe6YRJFcTqdWk8YjUbValUQBKv4HB5r78kSJfavuJJ/93j1rpGTewM2zlIURdM0x3Esy8ZiMYZhfD5fIBBIp9OSJJmw/FnPVEJdpXgmbG1H124qXLn4uE44w+EwSZJer5cgCI/H43a7g8Egz/Mul0tRFBN+Ht5yJX9frTD5nY2jlZPrw4E8LBTum81mq9Wq1WqRSCSVSrXb7U6nk81mE4kEACCE5vDHV++px+dfTi8KewfnZOYhbm8vAEwmE+ufqqpqmrbYbQDQ0ewbzewttWZjhfYROv5K6PZVWXJJfgASDg1pMF9TIAAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;shopify_logo.png&quot;
        title=&quot;&quot;
        src=&quot;/static/1a28242ce5be02f2f6a3070e75f0d136/c1b63/shopify_logo.png&quot;
        srcset=&quot;/static/1a28242ce5be02f2f6a3070e75f0d136/5a46d/shopify_logo.png 300w,
/static/1a28242ce5be02f2f6a3070e75f0d136/0a47e/shopify_logo.png 600w,
/static/1a28242ce5be02f2f6a3070e75f0d136/c1b63/shopify_logo.png 1200w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그러면 더욱 더 이해가 안 가기 시작한다. 쇼핑몰 플랫폼에서 왜 이런 걸 내놓았을까?&lt;/p&gt;
&lt;p&gt;Shopify에서 내놓은 기능인 Shopify Functions 때문이다.
이게 무엇인고 하니, 유저가 운영하는 쇼핑몰의 백엔드 로직을 커스터마이징 할 수 있는 기능이다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/de367b4d2fa3d6004bc838ee4f611434/c4842/shopify_functions.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 73.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAAsTAAALEwEAmpwYAAAChUlEQVR42lVUXW/TQBD0/39FSCD+AM+0LyBUIYTahyKBogKlidImrRs39tn3sffhc5JBu05Kamm19vlubmd27grvCde/f2K3AxqloFSLmHr4kBAi54g+D5J5bMwRISYJHxPqukbbKnSdRlGWD3j97hX40cZiuVxivV7DWEKtNIgISimEEGApQHUai8UCq9UKddMK6HxZ4ez8CuQDCmMMptMZ+j7LzvzddR2s89CW4L1H27bwIcD5CNVq2ZSjelpL1fPFAy4uJ7KmyDmjzxnDMDzTYRq0z44CtHEymRfzODPhMWbBVRnnYSjCkkcRY8TN1QTb7RY+9iBZlOTd+QAiD+cIIUT55g28D4gxCbD1EZ4M2tUNYt6gUE2D92/eYjMMoNALrUNwNU3T4O72FtoYqM5CtR2qqhKd207D+YSn6gGzX+cCXrDo5eNKNAzpqMKQpCLrCI4I1rmRmh2rDTFKg3jT+7LC1Z+ZyFBsNlvp8Ha7Q0xZrMLAHKwhd5a4YgovxjmP/wL6vMGw2SL2GUXwhMnlV/S9h4/5iHKSiqx10mXWsuPm0Ggf6XhnxTZ39yVOP50h9QMKtsXpyQfEQAgp77XjyqIAGGMxn8/Fj43q0Gr7HGyh2A8oH0tcnH+R98IHj1VVIefhWcNRv9EGTKnTWjJT5+4fB8vEcjgXRM8C+2e3e6mhgLJF2C57YF4gOsYxGJALUZbwt1zLES1i7/H9+rM0hfaVjZQDtHXiQTkpewMf5ggDHwXwrmrw8cdfJG4KBYNvkxPwiRnN/N+HDKC1kcO/rms5iseAh42nszlubqYoHysUiR3fOgHkLh0oM31/uFFClAuCqR+scwi+mRo2+1MNYx3+AdykehrWVJuNAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;shopify_functions.png&quot;
        title=&quot;&quot;
        src=&quot;/static/de367b4d2fa3d6004bc838ee4f611434/c1b63/shopify_functions.png&quot;
        srcset=&quot;/static/de367b4d2fa3d6004bc838ee4f611434/5a46d/shopify_functions.png 300w,
/static/de367b4d2fa3d6004bc838ee4f611434/0a47e/shopify_functions.png 600w,
/static/de367b4d2fa3d6004bc838ee4f611434/c1b63/shopify_functions.png 1200w,
/static/de367b4d2fa3d6004bc838ee4f611434/c4842/shopify_functions.png 1634w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
스토어 파이프라인을 자기 입맛대로 바꿀 수 있도록 해 주는 굉장히 신기한 서비스인데, 이걸 구현하기 위해 WASM이 쓰였다고 한다.
WASM의 특징 중 하나인 샌드박스가 유용하게 쓰인 모양. 물론 브라우저 밖에서 사용하는 것이니 WASI를 활용했다.
따라서 WASM과 잘 맞는 rust를 기본 언어로 사용하는 Shopify Functions를 출시하게 된다.&lt;/p&gt;
&lt;p&gt;하지만 문제가 하나 있는데, 대부분의 웹 개발자들은 rust를 쓸 줄 모른다는 사실!
다들 JS를 주로 쓰는데 이것 때문에 rust를 입문하기엔 rust의 진입장벽이 너무 높다.
따라서 Shopify는 WASM에 JS를 올린다는 발상을 실천으로 옮기게 되는데...&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;However, at the time of writing, WebAssembly’s architecture makes JIT-ing impossible. There’s no way for Wasm to generate and then execute code, as the memory storing the instructions is completely inaccessible to the module itself. This is by design: By preventing any code that wasn’t present during module instantiation from being executed, almost all remote code execution vulnerabilities become impossible.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;아뿔사, 그냥 기존의 JS 엔진을 가져오려 했지만 WASM에선 JIT가 불가능하다는 문제에 직면했다.
보안 이슈로 막아놓은 것. 따라서 다른 대안을 찾아야 했다.&lt;/p&gt;
&lt;p&gt;그렇게 찾은 대안은 바로 &lt;a href=&quot;https://bellard.org/quickjs/&quot;&gt;QuickJS&lt;/a&gt;.
C로 구현한 JS 엔진이다. ES2020 까지 지원한다.
C이기 때문에 WASM 위에 올라간다!&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6f888a055caf756c59f233c758751da7/212bf/javy_dynamic.jpg&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHcrKJAf//EABYQAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAQABBQJJUR2//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFhEBAQEAAAAAAAAAAAAAAAAAAAEC/9oACAECAQE/Acq//8QAFxABAQEBAAAAAAAAAAAAAAAAAAERMf/aAAgBAQAGPwLqTVf/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMUH/2gAIAQEAAT8hZJQj2H2ofp44f//aAAwDAQACAAMAAAAQh9//xAAVEQEBAAAAAAAAAAAAAAAAAAABAP/aAAgBAwEBPxABZv/EABcRAAMBAAAAAAAAAAAAAAAAAAABIRH/2gAIAQIBAT8Qp0TGf//EABoQAQADAAMAAAAAAAAAAAAAAAEAESFRYXH/2gAIAQEAAT8QZUXeXC+qasXYxzYrwn//2Q==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;javy_dynamic.jpg&quot;
        title=&quot;&quot;
        src=&quot;/static/6f888a055caf756c59f233c758751da7/212bf/javy_dynamic.jpg&quot;
        srcset=&quot;/static/6f888a055caf756c59f233c758751da7/f93b5/javy_dynamic.jpg 300w,
/static/6f888a055caf756c59f233c758751da7/b4294/javy_dynamic.jpg 600w,
/static/6f888a055caf756c59f233c758751da7/212bf/javy_dynamic.jpg 768w&quot;
        sizes=&quot;(max-width: 768px) 100vw, 768px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
따라서 JS 스크립트를 받은 뒤, QuickJS를 통해 QuickJS 바이트코드로 변환하고,
그걸 WASM 위에 올린 뒤 실행하는 엄청난 마개조가 완성되었다.&lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;처음 봤을 땐 이런 물건이 나온 이유를 짐작하기 힘들었는데, 역시 다 이유가 있었다.
나름 합리적인 이유로 재미있는 결과가 나왔다는 게 굉장히 흥미로웠다.
적정기술의 훌륭한 예를 볼 수 있었던 흔치 않은 기회였다.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://shopify.engineering/javascript-in-webassembly-for-shopify-functions&quot;&gt;Bringing Javascript to WebAssembly for Shopify Functions&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://news.hada.io/topic?id=9289&quot;&gt;Javy - JS to WebAssembly 툴체인&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/bytecodealliance/javy&quot;&gt;Javy Github&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://bellard.org/quickjs/&quot;&gt;QuickJS&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[svgo에서 viewBox를 지우는 이유]]></title><description><![CDATA[react로 svg를 다룰 때 겪을 가능성이 큰 문제에 대해 정리하였다.
분명 넣을 때는 멀쩡했는데, 빌드 완료한 코드의 svg가 좀 이상한 문제가 발생하는 경우가 있다.
그건 svgo 때문에 발생했을 가능성이 크다. svgo? SVG…]]></description><link>https://mingyu.kim/svgo-viewbox/</link><guid isPermaLink="false">https://mingyu.kim/svgo-viewbox/</guid><pubDate>Thu, 01 Jun 2023 02:35:21 GMT</pubDate><content:encoded>&lt;p&gt;react로 svg를 다룰 때 겪을 가능성이 큰 문제에 대해 정리하였다.
분명 넣을 때는 멀쩡했는데, 빌드 완료한 코드의 svg가 좀 이상한 문제가 발생하는 경우가 있다.
그건 svgo 때문에 발생했을 가능성이 크다.&lt;/p&gt;
&lt;h2&gt;svgo?&lt;/h2&gt;
&lt;p&gt;SVG Optimizer의 약자로, svg 최적화 도구다. 보통 &lt;a href=&quot;https://github.com/gregberge/svgr&quot;&gt;svgr&lt;/a&gt;을 사용하게 되면 기본적으로 켜져 있기 때문에 접하기 쉽다.&lt;/p&gt;
&lt;h2&gt;svgr?&lt;/h2&gt;
&lt;p&gt;react에서 svg를 사용할 때 많이 쓰는 방법 중 하나가 &lt;a href=&quot;https://github.com/gregberge/svgr&quot;&gt;svgr&lt;/a&gt;을 이용하는 것이다.
svgr은 svg 파일을 React component로 바꿔줘서 쓰기 쉽게 해 주는 툴이다. 그리고 svgr에서는 기본적으로 &lt;a href=&quot;https://github.com/svg/svgo&quot;&gt;svgo&lt;/a&gt;를 이용해 svg 최적화를 진행한다.&lt;/p&gt;
&lt;h2&gt;viewBox?&lt;/h2&gt;
&lt;p&gt;svg를 그릴 때, svg viewport의 위치와 크기를 정할 수 있다. 이 값이 바뀜에 따라 svg가 그려지는 위치가 바뀐다.
viewBox의 설정 없이 svg의 width와 height를 바꾸면 잘려 나오는 svg를 볼 수 있다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;xml&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;&amp;lt;svg viewBox=&amp;quot;0 0 100 100&amp;quot; xmlns=&amp;quot;http://www.w3.org/2000/svg&amp;quot;&amp;gt;
  &amp;lt;rect x=&amp;quot;0&amp;quot; y=&amp;quot;0&amp;quot; width=&amp;quot;100%&amp;quot; height=&amp;quot;100%&amp;quot; /&amp;gt;
  &amp;lt;circle cx=&amp;quot;50%&amp;quot; cy=&amp;quot;50%&amp;quot; r=&amp;quot;4&amp;quot; fill=&amp;quot;white&amp;quot; /&amp;gt;
&amp;lt;/svg&amp;gt;

&amp;lt;svg viewBox=&amp;quot;0 0 10 10&amp;quot; xmlns=&amp;quot;http://www.w3.org/2000/svg&amp;quot;&amp;gt;
  &amp;lt;rect x=&amp;quot;0&amp;quot; y=&amp;quot;0&amp;quot; width=&amp;quot;100%&amp;quot; height=&amp;quot;100%&amp;quot; /&amp;gt;
  &amp;lt;circle cx=&amp;quot;50%&amp;quot; cy=&amp;quot;50%&amp;quot; r=&amp;quot;4&amp;quot; fill=&amp;quot;white&amp;quot; /&amp;gt;
&amp;lt;/svg&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 514px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/19e68979e524aceba096ffa497655364/dea13/viewbox.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 49.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABRklEQVR42qVSy6qCUBQ91rwysKcpWdmDBjVoKg0iJ/pnJuJnGfQL0Vc0ydZl7YuSBbfBPbDY6+xz9mK/1G63Q7/fh2VZGI1GFdi2jU6ng/1+j+PxiG63K3+bzSam06mAfDAYoNfr4XA4QDFAKfUnHMfBer0WbhgG0jTF5XIRkNPHt9VqBWWaplxqtVppXzntcrkUNBoNXK9XvB/6Wq0WFosF1HA4LDPRNK3CizvF2JLT6SQC9/sdj8dDQM6TJIm0qRQssmHarutWfLPZDJvNBufzWYIp9Hw+BeQ8WZZhu91+CrJXkvp/Bb+VzInHcVyWnOe54KPkYij1el0EaF95IchWcEVut9vHUOjTdf23sna7/XVtOJCiDZxmFEXl2pDTxzfpved5mEwmEjCfzyugj6X6vo8wDDEej2UnucjFH3LG0x8EAX4AMEl0mhJ9SLoAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;viewbox.png&quot;
        title=&quot;&quot;
        src=&quot;/static/19e68979e524aceba096ffa497655364/dea13/viewbox.png&quot;
        srcset=&quot;/static/19e68979e524aceba096ffa497655364/5a46d/viewbox.png 300w,
/static/19e68979e524aceba096ffa497655364/dea13/viewbox.png 514w&quot;
        sizes=&quot;(max-width: 514px) 100vw, 514px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
(두 svg의 차이는 viewBox밖에 없다)&lt;/p&gt;
&lt;h2&gt;svgo에 무슨 문제가 있는가&lt;/h2&gt;
&lt;p&gt;최적화 과정에서 &lt;strong&gt;viewBox를 제거&lt;/strong&gt;한다(!).&lt;/p&gt;
&lt;p&gt;그냥 묻지도 따지지도 않고 지우는 건 아니고, &lt;code&gt;width&lt;/code&gt;와 &lt;code&gt;height&lt;/code&gt; 속성이 viewBox와 같은 경우에만 지운다.
제거를 안 하는 옵션을 따로 제공하고 있지 않고, 관련 plugin을 꺼야 한다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;{
  loader: &amp;#39;@svgr/webpack&amp;#39;,
  options: {
    svgoConfig: {
      plugins: [
        { removeViewBox: false },
      ],
    },
  },
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이런 식으로.&lt;/p&gt;
&lt;p&gt;하지만, 사람들은 왜 이 기능이 default로 켜져 있는지 의아해 했고, 많은 사람들이 기본으로 꺼져 있기를 원했다.&lt;/p&gt;
&lt;h2&gt;왜 안 고치고 있나요?&lt;/h2&gt;
&lt;p&gt;물론 오픈소스기 때문에 사람들은 해당 레포에서 &lt;a href=&quot;https://github.com/svg/svgo/issues/1128&quot;&gt;의문을 제기하기 시작했다.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 924px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/9e957225f54e5351105559d6c17fe92c/9a1cf/benefit.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 58.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAA7DAAAOwwHHb6hkAAABjklEQVR42o2T226jMBCGef8X6BP0Wdqr3lRRtdrVbpImEAg0GJ89Nv/KQ8g6aivtSB9jPNiaw0/1+nOD119v6NoOdV1j/37AfrdH27Y4HmvstjvUdcOx7Z8t+r6HlApKa2Sb5/mO6uH5EQ9Pj6BAMNbCWgfvPZzzsM5Ba8N+TgkpJT60XoTrJVgBUDmKCIHgfIAPGWIoRqQ0I95ICzGB4uJX6EZEdZg0JqUxfIy4CIlRSPZCaihjF/QVU/hiXxsHyZV4VDlNYwya5oTTqUVTN+i6jnt1PvcY+gE9k9/PGIaB9/N7GRsvF66gyqV7ZyHECGsttNZw3t81fLVyXVrZV84wRUIk/+mj/6U8U21enlkG8tYbx97mIVGED/e4QBxbcZ64j5MyHKvq9x2XeRkFI8QEISSk0tDGsmwyKqM0N36daCZPOe8Z60AUl5KJPLSaWD4hhCue9bjinGOICN8Zl5wfwS8XLfos+oObXotDYH2muSD9gzM8/HA4/D5CKsmpL9M2PO28zn/IV1P/yv4CBbimEl2ApZwAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;benefit.png&quot;
        title=&quot;&quot;
        src=&quot;/static/9e957225f54e5351105559d6c17fe92c/9a1cf/benefit.png&quot;
        srcset=&quot;/static/9e957225f54e5351105559d6c17fe92c/5a46d/benefit.png 300w,
/static/9e957225f54e5351105559d6c17fe92c/0a47e/benefit.png 600w,
/static/9e957225f54e5351105559d6c17fe92c/9a1cf/benefit.png 924w&quot;
        sizes=&quot;(max-width: 924px) 100vw, 924px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
...그리고 가차없이 닫혔다.&lt;/p&gt;
&lt;p&gt;svgo에 있는 한 메인테이너가 viewBox 속성 자체도 용량을 가지고 있기 때문에 바이트 수를 줄이기 위해 지웠다고 답한 뒤,
장장 4년에 걸친 댓글 싸움을 하기에 이르렀다.
해당 메인테이너는 viewBox는 width랑 height가 각각 같을 때만 지우는데 무슨 문제냐는 입장이다.&lt;/p&gt;
&lt;p&gt;하지만 &lt;strong&gt;당연히&lt;/strong&gt; 문제가 생긴다.
scalability 관련해서 문제가 생기는데, viewBox가 없는 svg인 경우 css로 해당 svg의 크기를 변경할 때 짤리는 현상이 발생한다.
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 872px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b1fc23ebeb5b5e7010cc9c13a0383204/65654/scale.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 80.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACVUlEQVR42nVS207bQBD1P/Cz/Qh+gGcEL5WQeOeJ10olqopUAjghjbGT2Gs7e5v17vpUu3GMadqVjjKazByfmTNJ13UQQkArBSklOBfgnEOKQ7xv9xBSxBq+57FGDDXGdAiv7/sI3/dInPdgdYPNtgSXGoo6SG2gtIHUBKktFPkhNlBkPmqoA3UWZCy0sbDOI7HOoWk5KlaDCwGpaICGVB2kYhAyH2INESCH30kcelwgJCLUrEZTt2gaDa01jDEg0iDTg2gJrWcg7Q85olgTEOIAYwhhdWHsxBBht61Qlmvsdt/AWIOmaVBVDDVjqOsWjHGwGNdgFQNj9YBDLghq2z2cc0jCl3Y7BqUqKPUDSlE0SE0gBYeSKqoac1JCHaEUhJCw1iEJMv/33t/fkec5KiGQ5Tmenn7FfFD2PJ+DtS1KzrFcLpGmKYIfifcfhEQKRVFEeO/H/OL6GqooDififUR4PE2xurnBcDsIXFFhmN1aG8fYbrcRkXBQn93dQZflp5sLT67XKO7vxw/FOwx/VVUVZa9WqzjmZrOJhMdGRzSqnRJ6a6GPyo+HHRqD5X+jdy4WtvM5vn/5gt+3t4dG50bC9PISxWyGfjpyGDXLMiwWC7y8vESV6/UaztqDAY+P+Hp2hp/n56OqI2H+8IDi7Q122GkknJpy8obGcjaDEeJk5OCqqKrRwDgyGYN1liFdpHh9fR0VTk1Jr66gN5sPwoFgP5/j+eLisynBYaMlFBdxd2EFbrInoI87+te9TslHhdZ20GIPI9WnkY6u+WHZvj/FaZ3HH1n90hMRIPMUAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;scale.png&quot;
        title=&quot;&quot;
        src=&quot;/static/b1fc23ebeb5b5e7010cc9c13a0383204/65654/scale.png&quot;
        srcset=&quot;/static/b1fc23ebeb5b5e7010cc9c13a0383204/5a46d/scale.png 300w,
/static/b1fc23ebeb5b5e7010cc9c13a0383204/0a47e/scale.png 600w,
/static/b1fc23ebeb5b5e7010cc9c13a0383204/65654/scale.png 872w&quot;
        sizes=&quot;(max-width: 872px) 100vw, 872px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그렇기 때문에 사람들이 viewBox 제거를 끄자고 계속 주장하지만...&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 922px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/6a2162bb9aeea108ba729494b3f8d862/6da96/minority.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 22.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAnElEQVR42p2NS27DMAxEff97ddVdbxGRkiLFtUX9XmEZSLsugYcZkJjh9vX5gYoj7wev/bj1++AoRu0Da/2m9l//h9rGylxYbWytdUopPB5uoSI4d+EQEUIIqHpCiMQY8T4Q/L1TVbz3iCgpZfoYbABW6ypSFXJKK/iMT3LK69mFLbW3N7P37TxPWmvMOe/C3ht2vrCy89+ZwBiTH/sFNmEL9k5TAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;minority.png&quot;
        title=&quot;&quot;
        src=&quot;/static/6a2162bb9aeea108ba729494b3f8d862/6da96/minority.png&quot;
        srcset=&quot;/static/6a2162bb9aeea108ba729494b3f8d862/5a46d/minority.png 300w,
/static/6a2162bb9aeea108ba729494b3f8d862/0a47e/minority.png 600w,
/static/6a2162bb9aeea108ba729494b3f8d862/6da96/minority.png 922w&quot;
        sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;메인테이너는 &quot;아 이해했어. 쓸모가 있을 때가 있구나. 하지만 몇몇 사람들 때문에 default optimization을 끄는건 싫어&quot;라고 하며 의견을 묵살했다.
많은 사람들이 반론을 제기하지만 결국 다 묵살.&lt;/p&gt;
&lt;p&gt;시간은 흘러 이슈가 발행됐던 날로부터 몇 년이 지났고, 물론 변한 것은 없었다.
사람들은 점점 화가 나기 시작했고, 급기야 짤방까지 만들며 비난을 하기에 이르렀으며,
결국 포크를 해야 한다는 극단적인 주장까지 나오기도 했다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 922px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7309de097040f5a91020fe1c5a9847e8/6da96/cat.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 93%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEfklEQVR42q2U+0/TVxjGvzomSGGgXAYUpCukIFBwaK0i9FtA7git9+kQoyPiFi+4GVycmVG3BE1mpohTcXIZCDinwhzGaXTLjMY4ozOTH3SX7AcG4VJ6pRfgs9AS4h+wN3nyvO9zTj7JOSc5wh9P7mM0mhgYHMZotrplstjcbrHZsTvHsDtdUz6GwzU23bvn6czFqN2JwLiL0dFRDAYDBsMIhhHjtBuNRkwmMyaTiZHJeWgQw7DBnY9MrU/68LDBvc/lGkMAsFpt9P3bR19fv1v9ff309va6s8GBQQYGBujv62NocBCL2YzFYnHLarVO92azGafT5QE6HA53YDaZ3W4cMTJiMGAxW9xrTtc4TteE28fHxnC5XB45ndP9ZE1MTHiAk0ceGBrCaLEy6nBic9ixOhyMOhxY7ZP3OI7dBVbHONZROxabDbPNhtFqndYEnnIDu2/cQFy0iFKtlmJRpEDUUCKK5IsipaKIVtSgETXkT+WFosgKrRZdZiY6rRZ9ZibpKhWdXV0e4Jn6erwFAYUgECsIhAgC8ql50oVXJBMEgl+ZZwgCvlN97alTHmBbRwuCl4C332x8/f2ZJfFmdoAfEbIQAsLn4h8UjFQqRyaVEhH6JhGhoaQnJVKkzSIySY3P3EgkQVKaL3Z4gBfbWpnhJZCcEkd8vJxgqT+p6vnkaRazKlVGZEQ4iSnppCmVJMhjWLM4lU/zsigr1BGbIhISrsBvThTNre0e4NcNF1guqjlRVU7N2hwK0mJIVMrQqxKpW5dGliKCuIS3WapUkqKIQ5esRBUVjcQngEDfQILeCMZ7pg9NDc0e4JWr31K9KYf6bYU0b9WxM1+FLMSX8oXzOFyqJiFEQm5uAXs+qKIkNxelPJb5MjmRYTJC54Yhi4jG39ufpsYp4E+3uqjIieHgChW1a/Oo0WlIiQ7k46I0Gt7TkZMcQ1HRSqr37md35RbiouUUazK4fO44TSePs3mlHom3DxdbvvEAn967yfa8GA4XL6R2VS67xQUcqVjPnc8/pLt6EzsLF7GmZAXa9Ex0+dkkyRXoc7Q0HtzBpdM1lOaXuF+5rbXFA+x5fJ9972bwUaGCfctTaNhexqkKPYd0arZlpTJH8hrLRQ1pqmXEyxUkxCbwjm41R/ftoqX2M/bsqCQxPoG21jYP8FrnVZIVUvTpMmrK87h58H2WxUlJCfXlrbBAJD5eLFUvZOniNCKC57EkXUNhST7rN2azt3ozB/aXcuCTTTx89MQDfPbgF77ctZX95TpuHdnOXn0GPt5eLJGHIQ8PQhbqR1ZGGmpVOuoFqaQmJbMgKZ7ifC3btmykcusG2s8epfefvz3A3+/dpbGqkvaqdZwo06CMCnDfSZRkJgGzBMJeFyjI1rB2g54N6zIoW5/NjorVtNYd4853TXScP8mFLw7xZ89TD/Cvly942H2Fnrtd/NzVwYXzZ/nqdB2N9WdoqD9D67k6rndepvvH61y51k7n95e4ffsHXj7/jZ4nj3jx7FeeP37A8EA/wuQvMT7m5P+q/wABC+fVYKQiZgAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;cat.png&quot;
        title=&quot;&quot;
        src=&quot;/static/7309de097040f5a91020fe1c5a9847e8/6da96/cat.png&quot;
        srcset=&quot;/static/7309de097040f5a91020fe1c5a9847e8/5a46d/cat.png 300w,
/static/7309de097040f5a91020fe1c5a9847e8/0a47e/cat.png 600w,
/static/7309de097040f5a91020fe1c5a9847e8/6da96/cat.png 922w&quot;
        sizes=&quot;(max-width: 922px) 100vw, 922px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
(화가 많이 나신 듯)&lt;/p&gt;
&lt;p&gt;결국 지친 사람들은 다른 방법을 찾게 되는데, 더 이상 관리하고 있지 않는 해당 레포의 초기 메인테이너를 찾아가 컨택을 하기에 이르렀다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 921px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/7bd813413da2115c6aaceed7a8757a47/0f67e/original.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 37.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABBklEQVR42qWQ4W7DIAyE8/7v2QRoE8CAIdD0JjtLK23/NqRPPhtkc56su2PdAnxMiKkohRv2cWAfT+z9Q9vHb/pAoIyYGHsfmAozHo/1ZF2xbR7eB6ybh3UPhECaC5Qy0kXOIErIuSBEQoyEMZ6YjuMAEYEi6YOUEmKMCCHCh4BEZ55zRt87ej8ZYyiXlvN6vTBJYb4tcM7BuTucdbDWwhoLYwyWZVFtjcF8m5VlMZjnGcZYjXIvQ4+robN3tSw/ba2h1YZaq0bmqpqZ9U70xc9cG4rvy2opjFKK7kX2JFqorYFF5/KucWFUrroK6fGx3Bpo83gehxb+Cr7jNGTRXN8T/oNY/gKqfmyddRlwxQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;original.png&quot;
        title=&quot;&quot;
        src=&quot;/static/7bd813413da2115c6aaceed7a8757a47/0f67e/original.png&quot;
        srcset=&quot;/static/7bd813413da2115c6aaceed7a8757a47/5a46d/original.png 300w,
/static/7bd813413da2115c6aaceed7a8757a47/0a47e/original.png 600w,
/static/7bd813413da2115c6aaceed7a8757a47/0f67e/original.png 921w&quot;
        sizes=&quot;(max-width: 921px) 100vw, 921px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;그 메인테이너는 현재 svgo가 npm 주간 다운로드 15M이나 되는데,
breaking change를 제대로 된 확인 없이 자신이 merge할 수는 없다고 하며 대신 viewBox 관련 이슈에 대한 내용을 README.md Troubleshooting 최상단에 올리는 PR을 merge하게 된다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1173px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/76dc71d5c19e1da9644c44b7e1efffc3/03914/readme.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 20%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAq0lEQVR42m3Oyw6CMBCFYd7/wXStLgwtQZAqXkJEaJmqgd9IDWri4kvOnJnFRMYfOMmFyjuqm8MhwSCfPPF/uq/7QYhmjyULm6Bdier2JFKiu5L0dsD0p0nRH0chB995x3kUzR8rllYR1xvWdYq2W+JrRtwatC1IbI5qMpJXbgyqyVFthmo2Y6/bsE/FkN9Lop0/cpaaSiyVt9PrbvBvYe4GP/rsf9lecL3wBJVtMEya/JwkAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;readme.png&quot;
        title=&quot;&quot;
        src=&quot;/static/76dc71d5c19e1da9644c44b7e1efffc3/03914/readme.png&quot;
        srcset=&quot;/static/76dc71d5c19e1da9644c44b7e1efffc3/5a46d/readme.png 300w,
/static/76dc71d5c19e1da9644c44b7e1efffc3/0a47e/readme.png 600w,
/static/76dc71d5c19e1da9644c44b7e1efffc3/03914/readme.png 1173w&quot;
        sizes=&quot;(max-width: 1173px) 100vw, 1173px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;
&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 853px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/48e3d62319d5d8c24092cfe1c3535c39/66caf/troubleshooting.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 25.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAu0lEQVR42o2PyQ7CMAxE+/9/SYFWZG222m1oBsWgHriApZFHifM8GYwxGMcrpmnGZbwihIjvaq3hOH6oNZkbQgjwzgvIOSeKH9+Xdf88DvxTAlQPhXmacb/d0b3WBkYbaKXhrIW1Fikl5JxPpRg/vpxn+74LdPDOQSktaXqqDliWBUQMZsa2bdJpXd+ddxBXEG8golO11jew5CzfSjGBic403gf4JchwKUXuxVNF5oayEvrbXIok7Ys78AVpzIM0JeKPKQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;troubleshooting.png&quot;
        title=&quot;&quot;
        src=&quot;/static/48e3d62319d5d8c24092cfe1c3535c39/66caf/troubleshooting.png&quot;
        srcset=&quot;/static/48e3d62319d5d8c24092cfe1c3535c39/5a46d/troubleshooting.png 300w,
/static/48e3d62319d5d8c24092cfe1c3535c39/0a47e/troubleshooting.png 600w,
/static/48e3d62319d5d8c24092cfe1c3535c39/66caf/troubleshooting.png 853w&quot;
        sizes=&quot;(max-width: 853px) 100vw, 853px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;이렇게 README에 적히게 되었고, 2023-06-01 현재 svgo의 마지막 code merge이다.&lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;오픈소스도 결국 사람이 만드는 프로젝트고, 사람이 운영한다.
세상에는 수 많은 사람들이 있고, 그 중에서는 별의 별 사람들이 있다는 사실을 항상 기억하며 오픈소스를 사용하는 것이 좋다고 생각한다.
언제나 오픈소스가 이상적으로 돌아가진 않고, 오히려 예상했던 대로 잘 굴러가는 케이스가 극히 드물지 않을까? 마치 사업처럼.&lt;/p&gt;
&lt;p&gt;또 오픈소스 관리자의 입장이 이해가 안 가는 것도 아닌 게,
수 많은 사람들이 이용하고 있는 도구의 기본값이 갑자기 바뀌게 되면 엄청난 파급력을 불러일으킬 것이기 때문에 조심하는 것도 그럴 수 있긴 하다고 생각한다.
물론 그럼에도 불구하고 해당 이슈는 사실상 버그 아닌가 싶어서 마음에 드는 대처는 아니었다.&lt;/p&gt;
&lt;p&gt;그리고 svgo로 최적화 시킨 svg는 viewBox 뿐만 아니라 다른 부분들도 높은 확률로 박살이 나 있어서, 그냥 끄는 게 정신건강에 이롭다...&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// webpack.config.js
  {
    test: /\.svg$/,
    use: [&amp;#39;@svgr/webpack&amp;#39;],
    options: {
      svgo: false
    }
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이렇게 꺼 버리자. svg를 최적화 하려면 js 단에서 하는 게 아니라 svg 파일 단에서 하는게 맞다고 생각한다. 안 그러면 디자이너가 원하는 대로의 모습이 나오지 않는다.&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/viewBox&quot;&gt;MDN reference - viewBox&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/svg/svgo/issues/1128&quot;&gt;SVGO Github issue - What is the benefit of stripping viewBox?&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Vite에서 entrypoint html 다루기]]></title><description><![CDATA[기존 레포를 vite로 마이그레이션 할 일이 있어서 vite를 처음 써 봤는데, 기존 방식과 달라서 헤맸었다. 관련된 내용 정리. vite? 번들러(bundler) 툴이다. 디펜던시들을 사전 번들링(esbuild…]]></description><link>https://mingyu.kim/vite-starter/</link><guid isPermaLink="false">https://mingyu.kim/vite-starter/</guid><pubDate>Tue, 16 May 2023 02:55:21 GMT</pubDate><content:encoded>&lt;p&gt;기존 레포를 vite로 마이그레이션 할 일이 있어서 vite를 처음 써 봤는데, 기존 방식과 달라서 헤맸었다. 관련된 내용 정리.&lt;/p&gt;
&lt;h2&gt;vite?&lt;/h2&gt;
&lt;p&gt;번들러(bundler) 툴이다. 디펜던시들을 사전 번들링(esbuild로 한다) 하고, 소스코드들은 rollup으로 번들링한다.
그래서 webpack 같은 기존 툴보다 훨씬 빠르다고 주장하는데, 반대로 esbuild만 쓰다 vite를 쓰게 되면 훨씬 느려진 것을 체감할 수 있다...&lt;/p&gt;
&lt;p&gt;vite 측에선 rollup의 유연성을 위해 채택했다고 하는데, 사실 개인적으로도 맞는 판단이라고 생각한다.
esbuild는 진짜 뭐 없다. code spliting, TS type check 등의 기능들도 지원하지 않는다. 걍 빠르고 끝.
물론 esbuild 또한 점점 이것저것 개발하고 있다고 하는데, 아직은 기능들이 빈약한 것은 어쩔 수 없는 듯.&lt;/p&gt;
&lt;h2&gt;vite 기본 구조&lt;/h2&gt;
&lt;p&gt;vite.config.ts에서 build.input 파라미터 안에 entrypoint 가 될 &lt;code&gt;index.html&lt;/code&gt; 파일 위치를 넣고,
html 파일엔 import할 js/css path를 넣으면, vite가 알아서 번들링을 착착 해 준다.&lt;/p&gt;
&lt;p&gt;나머지 asset들도 잘 정리해주고,
chunk split(라이브러리 등을 다른 파일로 분리해서 배포하는 방법 - 라이브러리들을 따로 캐싱하고 싶을 때 주로 사용함)도
잘 지원해줘서 생각보다 사용하기 편하다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;html&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html lang=&amp;quot;en&amp;quot;&amp;gt;
  &amp;lt;head&amp;gt;
    &amp;lt;meta charset=&amp;quot;UTF-8&amp;quot; /&amp;gt;
    &amp;lt;link rel=&amp;quot;icon&amp;quot; type=&amp;quot;image/svg+xml&amp;quot; href=&amp;quot;/vite.svg&amp;quot; /&amp;gt;
    &amp;lt;meta name=&amp;quot;viewport&amp;quot; content=&amp;quot;width=device-width, initial-scale=1.0&amp;quot; /&amp;gt;
    &amp;lt;title&amp;gt;Vite + TS&amp;lt;/title&amp;gt;
  &amp;lt;/head&amp;gt;
  &amp;lt;body&amp;gt;
    &amp;lt;div id=&amp;quot;app&amp;quot;&amp;gt;&amp;lt;/div&amp;gt;
    &amp;lt;script type=&amp;quot;module&amp;quot; src=&amp;quot;./src/main.ts&amp;quot;&amp;gt;&amp;lt;/script&amp;gt;
  &amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;여러 html 파일들을 entrypoint로 쓸 경우엔&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;typescript&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;  build: {
    rollupOptions: {
      input: {
        main: path.resolve(__dirname, &amp;#39;index.html&amp;#39;),
        sub: path.resolve(__dirname, &amp;#39;sub/index.html&amp;#39;),
      },
      ...
    },
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;이런 식으로 정리할 수 있다.&lt;/p&gt;
&lt;h2&gt;문제&lt;/h2&gt;
&lt;p&gt;문제는 entrypoint html 파일들이 생성되는 path를 각각 파일들마다 커스텀 할 수 없다는 것이다.
무조건 해당 html file path를 따라 dist에 번들된다.
그래서 처음부터 vite를 쓴다면 상관 없겠지만, 기존 프로젝트에서 번들러를 바꾸려 할 때 문제가 생겼다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 364px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/dbe8c221f8d6d8a4bd15e1cdefc855d5/e45a9/structure.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 116.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACQklEQVR42o2U646bMBCF9w02BHs8Q4yBEBwwFxuyCZCLWnUr9fKrUlWp7/8kFURVpWqTzfz/dI5nzvETEcVxfOiH0hSe5yESPjxPiChluNlsTFkWeU70H0zvwEEQbDZp23bOOgAQQlwx4gwB7vBPiELKUGc6yzJTlq+vr+k6ASEIGGsGEWcI/Bb/NEtQFEXGmK7r0jQV0yBxBrr2Pvwk5iPdhpEoVmFZFNY6Oc9qtUIKaPnsD1+4eSG2fJOfYIG0JtjGcveyPwzDeDp1ziEhsSXo2h++0vIZKbi5sFCpvCiNKWAeIWBWXjB3Yu2FfO+mMhKtVViZom7qKIrWaRrHMQoQYeR9+j1j4u03EyKgiJDrOHRd1+12+763dUNsydoLN929hTHwG32w5lA1dV3XOsu8xYJzfnX0zp0FinW0qfLG2sZaV1VVprMkSR5KGBGpSOV57qwzxjjn+mEwpnww21Mx6qo6jietM8YY53za9oPKcZxUVa21llIiin/dAHg326iU2uZ5KFcAf09CRNxn7QXSYqrHrWwLIaSUmd6Ox2NZGs75rEwIDNLC+/jrHnwVStbrummstUEQgAAxRXbO9uEza473EkYUqFCaIndtq5QKgmAuxuQcssofv92E5+xRSpAn4W6/Pwz98XzeufZaDJ5bv/9C/uJuMaJI54UpimsrYCo0kb9Yjt/5tiHu37FNUSgrY8qqXK1WSikZKuKMb+3y8oOYd+8zmGwHYNKoH8Z+HI/nc+fcdKp6EImev6G37/wHwNKbeyXESbQAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;structure.png&quot;
        title=&quot;&quot;
        src=&quot;/static/dbe8c221f8d6d8a4bd15e1cdefc855d5/e45a9/structure.png&quot;
        srcset=&quot;/static/dbe8c221f8d6d8a4bd15e1cdefc855d5/5a46d/structure.png 300w,
/static/dbe8c221f8d6d8a4bd15e1cdefc855d5/e45a9/structure.png 364w&quot;
        sizes=&quot;(max-width: 364px) 100vw, 364px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;html plugin들을 싹 다 살펴봤지만, 대부분 특정 html 파일들을 각각 원하는 path로 보낼 수 있는 기능을 지원하거나 하지는 않았다.
&lt;code&gt;@open-wc/rollup-plugin-html&lt;/code&gt; 플러그인을 사용하면 억지로 가능하긴 한데 중복으로 번들링을 한다던지 하는 문제가 있어서 패스.
애초에 이럴 때 쓰라고 있는 플러그인이 아니라 그런 듯 하다.&lt;/p&gt;
&lt;p&gt;결국 포기하고 html 파일 구조를 변경하는 것으로 마무리. 더 좋은 방법을 찾지 못했다.&lt;/p&gt;</content:encoded></item><item><title><![CDATA[Three.js 에서 dispose()는 어떻게 작동할까?]]></title><description><![CDATA[threejs에서 dispose를 안 하면 gc가 제대로 수거하지 못 한다. dispose() 명령어를 이용해서 명시적으로 제거해야 한다.
링크 기하학은 속성 집합으로 정의된 꼭짓점 정보를 표시하는데, three.js…]]></description><link>https://mingyu.kim/threejs-dispose/</link><guid isPermaLink="false">https://mingyu.kim/threejs-dispose/</guid><pubDate>Fri, 28 Apr 2023 22:40:32 GMT</pubDate><content:encoded>&lt;p&gt;threejs에서 dispose를 안 하면 gc가 제대로 수거하지 못 한다. dispose() 명령어를 이용해서 명시적으로 제거해야 한다.
&lt;a href=&quot;https://threejs.org/docs/#manual/ko/introduction/How-to-dispose-of-objects&quot;&gt;링크&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;기하학은 속성 집합으로 정의된 꼭짓점 정보를 표시하는데, three.js는 속성마다 하나의 WebGLBuffer 유형의 대상을 만들어 내부에 저장합니다. 이러한 개체는 BufferGeometry.dispose를 호출할 때만 폐기됩니다. 만약 애플리케이션에서 기하학을 더이상 사용하지 않는다면, 이 방법을 실행하여 모든 관련 자원을 폐기하세요.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;왜 Three.js에서는 dispose()를 해야만 지울 수 있는걸까? Three.js에서 dispose()를 하면 어떤 일이 일어날까?&lt;/p&gt;
&lt;h2&gt;dispose()&lt;/h2&gt;
&lt;p&gt;대부분의 만들어져 있는 Object 코드들을 보면, dispose() 함수에 다음과 같이 오버라이딩을 한다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/helpers/Box3Helper.js
  dispose() {
    this.geometry.dispose();
    this.material.dispose();
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;각각의 geometry와 material에 dispose()를 실행하는데, geometry부터 확인해 보자.&lt;/p&gt;
&lt;h2&gt;Geometry&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;src/core/BufferGeometry.js&lt;/code&gt;를 보면,&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;dispose() {
  this.dispatchEvent( { type: &amp;#39;dispose&amp;#39; } );
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;다음과 같이 dispose 이벤트를 dispatch한다.
그럼 어디서 저 이벤트를 받을까?&lt;/p&gt;
&lt;p&gt;찾아보니 다음과 같은 파일들에서 이벤트를 받고 있다:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;src/renderers/WebGLRenderer.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLCubeMaps.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLCubeUVMaps.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLGeometries.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLMorphtargets.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLObjects.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLTextures.js&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;src/renderers/webgl/WebGLUniformsGroups.js&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;그 중 geometry는 WebGLGeometries.js에서 관리한다:&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/renderers/webgl/WebGLGeometries.js

function WebGLGeometries( gl, attributes, info, bindingStates ) {

  const geometries = {};
  const wireframeAttributes = new WeakMap();

  function get( object, geometry ) {
    if ( geometries[ geometry.id ] === true ) return geometry;
    geometry.addEventListener( &amp;#39;dispose&amp;#39;, onGeometryDispose );
    geometries[ geometry.id ] = true;
    info.memory.geometries ++;
    return geometry;
  }

  function onGeometryDispose( event ) {
    const geometry = event.target;
    if ( geometry.index !== null ) {
      attributes.remove( geometry.index );
    }
    for ( const name in geometry.attributes ) {
      attributes.remove( geometry.attributes[ name ] );
    }

    geometry.removeEventListener( &amp;#39;dispose&amp;#39;, onGeometryDispose );

    delete geometries[ geometry.id ];
    const attribute = wireframeAttributes.get( geometry );
    if ( attribute ) {
      attributes.remove( attribute );
      wireframeAttributes.delete( geometry );
    }
    bindingStates.releaseStatesOfGeometry( geometry );
    if ( geometry.isInstancedBufferGeometry === true ) {
      delete geometry._maxInstanceCount;
    }
    //
    info.memory.geometries --;
  }

...&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;내부 &lt;code&gt;geometries&lt;/code&gt;와 &lt;code&gt;wireframeAttributes&lt;/code&gt;에서 값을 제거하고,
그리고 &lt;code&gt;bindingStates.releaseStatesOfGeometry()&lt;/code&gt;를 호출한다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/renderers/webgl/WebGLBindingStates.js

  function releaseStatesOfGeometry( geometry ) {
    if ( bindingStates[ geometry.id ] === undefined ) return;
    const programMap = bindingStates[ geometry.id ];
    for ( const programId in programMap ) {
      const stateMap = programMap[ programId ];
      for ( const wireframe in stateMap ) {
        deleteVertexArrayObject( stateMap[ wireframe ].object );
        delete stateMap[ wireframe ];
      }
      delete programMap[ programId ];
    }
    delete bindingStates[ geometry.id ];
  }

  function deleteVertexArrayObject( vao ) {
    if ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );
    return extension.deleteVertexArrayOES( vao );
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;&lt;code&gt;releaseStatesOfGeometry()&lt;/code&gt;에서 바인딩 되어있는 &lt;code&gt;programMap&lt;/code&gt;을 제거하고,
&lt;code&gt;deleteVertexArray()&lt;/code&gt;를 호출해서 vertex를 제거한다(WebGL API이다)&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;이 부분이 중요, 크롬 기준으로 &lt;code&gt;delete bindingStates[ geometry.id ];&lt;/code&gt;로 bindingStates 안에서 지우기만 해도 메모리 누수가 생기지 않는다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;Material&lt;/h2&gt;
&lt;p&gt;Material은 어떨까?
똑같이 dispatchEvent()를 트리거한다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/materials/Material.js
  dispose() {
    this.dispatchEvent( { type: &amp;#39;dispose&amp;#39; } );
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;그리고 &lt;code&gt;src/renderers/WebGLRenderer.js&lt;/code&gt; 에서 받는다.&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/renderers/WebGLRenderer.js
  function onMaterialDispose( event ) {
    const material = event.target;
    material.removeEventListener( &amp;#39;dispose&amp;#39;, onMaterialDispose );
    deallocateMaterial( material );
  }

  // Buffer deallocation
  function deallocateMaterial( material ) {
    releaseMaterialProgramReferences( material );
    properties.remove( material );
  }

  function releaseMaterialProgramReferences( material ) {
    const programs = properties.get( material ).programs;
    if ( programs !== undefined ) {
      programs.forEach( function ( program ) {
        programCache.releaseProgram( program );
      } );
      if ( material.isShaderMaterial ) {
        programCache.releaseShaderCache( material );
      }
    }
  }&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;properties: &lt;code&gt;src/renderers/webgl/WebGLProperties.js&lt;/code&gt; 에서 import한 &lt;code&gt;WebGLProperties()&lt;/code&gt;이며, WeakMap이다.&lt;/p&gt;
&lt;p&gt;WeakMap은 Map처럼 key-value object인데, key에는 객체 또는 등록되지 않은 symbol이어야 한다는 점이 큰 차이점이다.
그리고 WeakMap에서 참조하고 있는 key는 gc 수집 대상이다.
따라서 WeakMap에서만 참고하고 있는 객체는 gc한테 수거당한다.&lt;/p&gt;
&lt;p&gt;해당 material이 있는 program의 캐시를 지우고, shader cache까지 지우는 걸 확인할 수 있다(&lt;code&gt;WebGLShaderCache&lt;/code&gt; 안에서 &lt;code&gt;Map&lt;/code&gt;으로 관리하고 있다).&lt;/p&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/renderers/webgl/WebGLPrograms.js
programs = []
...
function releaseProgram( program ) {
  if ( -- program.usedTimes === 0 ) {
    // Remove from unordered set
    const i = programs.indexOf( program );
    programs[ i ] = programs[ programs.length - 1 ];
    programs.pop();

    // Free WebGL resources
    program.destroy();
  }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;위와 같은 방법으로 리스트에서 제거한다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;splice()&lt;/code&gt; 보다 이 방법이 더 빨라서 해당 방법으로 제거하는 것으로 보인다.&lt;/li&gt;
&lt;/ul&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/renderers/webgl/WebGLProgram.js

this.destroy = function () {

  bindingStates.releaseStatesOfProgram( this );

  gl.deleteProgram( program );
  this.program = undefined;

};&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;program.destry()에선 gl.deleteProgram()을 호출한다(WebGL API이다).&lt;/p&gt;
&lt;h2&gt;Object&lt;/h2&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// src/renderers/webgl/WebGLObjects.js
function dispose() {
  updateMap = new WeakMap();
}

function onInstancedMeshDispose( event ) {
  const instancedMesh = event.target;
  instancedMesh.removeEventListener(
    &amp;#39;dispose&amp;#39;, onInstancedMeshDispose
  );
  attributes.remove( instancedMesh.instanceMatrix );
  if ( instancedMesh.instanceColor !== null ) {
    attributes.remove( instancedMesh.instanceColor );
  }
}&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;h2&gt;Control&lt;/h2&gt;
&lt;deckgo-highlight-code language=&quot;js&quot;  &gt;
          &lt;code slot=&quot;code&quot;&gt;// OrbitControls.js
this.dispose = function () {
  scope.domElement.removeEventListener( &amp;#39;contextmenu&amp;#39;, onContextMenu );

  scope.domElement.removeEventListener( &amp;#39;pointerdown&amp;#39;, onPointerDown );
  scope.domElement.removeEventListener( &amp;#39;pointercancel&amp;#39;, onPointerUp );
  scope.domElement.removeEventListener( &amp;#39;wheel&amp;#39;, onMouseWheel );

  scope.domElement.removeEventListener( &amp;#39;pointermove&amp;#39;, onPointerMove );
  scope.domElement.removeEventListener( &amp;#39;pointerup&amp;#39;, onPointerUp );


  if ( scope._domElementKeyEvents !== null ) {

    scope._domElementKeyEvents.removeEventListener( &amp;#39;keydown&amp;#39;, onKeyDown );
    scope._domElementKeyEvents = null;

  }

  //scope.dispatchEvent( { type: &amp;#39;dispose&amp;#39; } ); // should this be added here?

};&lt;/code&gt;
        &lt;/deckgo-highlight-code&gt;
&lt;p&gt;control 관련 코드들에서는 추가적으로 removeEventListener()를 호출해서 정리한다.&lt;/p&gt;
&lt;h2&gt;결론&lt;/h2&gt;
&lt;p&gt;geometry의 경우 내부 &lt;code&gt;geometries&lt;/code&gt; array와, &lt;code&gt;WebGLBindingStates&lt;/code&gt;의 내부 프로퍼티 &lt;code&gt;bindingStates&lt;/code&gt;에 있는 &lt;code&gt;programMap&lt;/code&gt;을 지우고,&lt;/p&gt;
&lt;p&gt;material의 경우 관련 정보는 다 WeakMap()에 저장되어 있고, dispose를 할 때도 program cache와 shader cache에서 값을 삭제한다.&lt;/p&gt;
&lt;p&gt;따라서 dispose()를 한 뒤 다시 사용해도 런타임 에러는 발생하지 않는다(캐시에 없기 때문에 다시 만들 뿐).&lt;/p&gt;
&lt;p&gt;Spector.js 등으로 찍어보면 geometry, texture를 dispose 안 한 경우 어떤 일이 일어나는지 쉽게 확인 가능하다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 519px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/03a1f09b9defd398d5c9e9e18c275989/b23ad/spector.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 123.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACGUlEQVR42qVU2XLiMBD0hwTQLcvG+HY2sAkJmDXXxuQols3//0dvWQae9iXiYcrSaKqlnum2J/wAwoSQ4QTCjMG1sXsbl7U2/bkfQgRdjW9r7bkfQnY5qUApgSfDGDrOoZMSpniAmmTQaQk/u4eKUuikgI4L+MW0X6dlX5MU9lzFua2VYQShfHiMc4gohxgnGA6HoITYm/ov7dd2P/pPnl5zjFIwxuEJzhDHMaqfc8ye5lBB2FPq6Hw7fHiaEZRG4Nd6g6+vvzDGB+luZMwpPEkJslBjs9uhfX2FUvIK2FP6XniSERRjje3+N3a7LYLA3PjCjnKgsFzWOBxalGWB4XB0G2BulKV8Op1wX5V22s6AqqNsJFZNg/f3N2RZitFodO3htwE1p5jqEep6ic/jES/P8yug0wsFowjoAGk8QVXkiKLIipU5TNhOmTIOPk5BTQQaxCBc9Ldx7hTWKZM4wcNzjeliBdUZXWmrepewTikMx7pp8Pl2QJFn5ylTd2GnRmK5qtG2B1RVedtQOtnkgcJ6s8Of49ECXnToJBtrvc7Lmx32+z1ms+ltL7w4ZVmv8PH5gbpegJAbKXdebpo1Doc3rOr6xh5yih+aYLFYoG1bbLdbCMGd+nemTBGx3inz+RMenx4hpXAH7JxCgwmIDjEgDIO7Oyf9XXVonZJkqF4aJNXD2SXG3SndzyGUDFmWIYrGII5UL5T/AcW71ifM7fUJAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;spector.png&quot;
        title=&quot;&quot;
        src=&quot;/static/03a1f09b9defd398d5c9e9e18c275989/b23ad/spector.png&quot;
        srcset=&quot;/static/03a1f09b9defd398d5c9e9e18c275989/5a46d/spector.png 300w,
/static/03a1f09b9defd398d5c9e9e18c275989/b23ad/spector.png 519w&quot;
        sizes=&quot;(max-width: 519px) 100vw, 519px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;의문이 하나 드는데, scene에서 없어진 material은 weakmap 외의 어느 곳에서도 참조되고 있지 않기 때문에, gc가 수거해가지 않나? 하는 점이다.
실제로 three.js example 중 memory test를 돌릴 때, geometry만 dispose()해 줘도
chrome expector에서 메모리 누수가 발생하는 것으로 보이지 않았다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/68b5ee69bbcb588e0215ebecdefdf4ba/29114/no_dispose_material_.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABR0lEQVR42m2SW08CMRSE+f//wgffTYw3RNEXA0SiYAIoGgV2uS1sF9ql7fYypiULC2GS5qRt+mV65pSkMlBKwVoLJ1eLKz9zklIijglWlCGhKUiSIooZ4hUFoQxLkqCEgoqQY7gTFwL94Rg/QYhw9IfBYohwOcB0EmI2ixCROUonHZk1rCEHYKcNF7hp9nH12kOtVsd1p45K5wWNZguN91+0g2DrsAgz+huSn0PyM+iscQDkXODpY4T7ToByb4Jqd4q79hSPX2NUPkd47BaA20qhZNmDtHpDJm9h9HDnVAiB+SIGZQyMUWz4BkJwcM79ndsfAI2JoOQDtGpBqzaUfIbW/fzj/tFkFoEka1CW+ha4vrJ044MiK3rs0HpIJi6QiUvv0FqGPCchpE/6WO6dMQbG2H3Ke6iEympQsroLpjg2UmYnJyDXPyDAZ9B7rwiZAAAAAElFTkSuQmCC&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;no_dispose_material.png&quot;
        title=&quot;&quot;
        src=&quot;/static/68b5ee69bbcb588e0215ebecdefdf4ba/c1b63/no_dispose_material_.png&quot;
        srcset=&quot;/static/68b5ee69bbcb588e0215ebecdefdf4ba/5a46d/no_dispose_material_.png 300w,
/static/68b5ee69bbcb588e0215ebecdefdf4ba/0a47e/no_dispose_material_.png 600w,
/static/68b5ee69bbcb588e0215ebecdefdf4ba/c1b63/no_dispose_material_.png 1200w,
/static/68b5ee69bbcb588e0215ebecdefdf4ba/d61c2/no_dispose_material_.png 1800w,
/static/68b5ee69bbcb588e0215ebecdefdf4ba/29114/no_dispose_material_.png 1920w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1200px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/a6b0bdea2b4fa6d18b3856335f541c3a/29114/no_dispose.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 44.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABOUlEQVR42nWSC2uDMBzE/f5fq4ONsYJbO2i3UfAVtGoexkcSG2+k1j5se/AnIZBfjst5yhxgjIHTMAx3M507aa1RFgWEqMCrGoxJZHmFggqUvEJeMng4aX55/oCTUgq7OMWOEERJgLCMENMIaZ4gzffYsxTeIyfHMzvcQCfg8ucXH5stkvUKfvAFP/CxWX1jvUzw+ZeNDq8vWRdBIWFyCduZm4cc0A9DvEUhFkGMxY7gNSB4CWK8kxh+mlyA09rzFqas0bMGPW0w9BZTCJ1SCEmBPeUgNEPZlKgURWMYGsMhNZ0BezuCRItedMe91f05U/cpJM1AGUctG7StQttqSNmBixqUyQcOxehwcjnYi0MH7Dp1jshOq7U4nOb+lw92BBbymOe8NsbouzZcy3tWmXl1JqCbZ5118w8iDbvG/fy5GQAAAABJRU5ErkJggg==&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;no_dispose.png&quot;
        title=&quot;&quot;
        src=&quot;/static/a6b0bdea2b4fa6d18b3856335f541c3a/c1b63/no_dispose.png&quot;
        srcset=&quot;/static/a6b0bdea2b4fa6d18b3856335f541c3a/5a46d/no_dispose.png 300w,
/static/a6b0bdea2b4fa6d18b3856335f541c3a/0a47e/no_dispose.png 600w,
/static/a6b0bdea2b4fa6d18b3856335f541c3a/c1b63/no_dispose.png 1200w,
/static/a6b0bdea2b4fa6d18b3856335f541c3a/d61c2/no_dispose.png 1800w,
/static/a6b0bdea2b4fa6d18b3856335f541c3a/29114/no_dispose.png 1920w&quot;
        sizes=&quot;(max-width: 1200px) 100vw, 1200px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt; (비교용 - dispose를 하지 않았을 때)&lt;/p&gt;
&lt;p&gt;WebGL spector 등으로 찍어봐도 &lt;code&gt;material.dispose();&lt;/code&gt; 만 주석처리 한 경우에는 메모리에 별 다른 변화를 확인할 수 없었다. BasicMaterial이라 그런가 싶다.&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 520px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/0a5e920cb16b9a538b5c017806731dc7/69902/spector_no_dispose_material.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 124%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAYAAAAxFw7TAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABr0lEQVR42q1VyXajMBDkQyZBS2sBJEAotvEyp7nM//9QzWsZj5OXl4vwoWg2lVrq6lJjQoJfVrjlBH+4woQZLh3g8wo3Zbh0hJ0yfL7ApVP5147LFtP2bQX5HkprNOQ8TBdA3fCE759xg+kjyA93uO4ZH2NcB20sGqUUXD6XTPgFz6I0fYr06Vn/8F1DEUGTQUNKIsceYV6gyEBbV4hr0ZBscRws5jmhfX+HkhJyBxotBXJvMU4T2rYFb8EeNEa2OEeHOS3/CXmmakItJVavMMYAKcQuskLIF7IWxMWwbstQ1O8hExRxsrjTsWiKy19dZSMF1rHD5fYbUuldkimEjyqv6wohxC7JlCWTFDgEh/PlUghfIBuBc7C43m67K3yXDbeeaZHnCXwvtyxryRvJg/0A6e6OwhV+kNW1npIYU0Y43eDmD5g+gC2tWFMFyh4eesIYI9q3X1BqZ6ewbD6G771cLZuS4eAwTvNrzIF1eA0WKS2v0SEb6kgC3trNXNUuk20knwdxgY4Z2vXFaXZlyGfKFCOuf/4iHVcosiDf1cuGdei0RAgDvPdfOqVmyf8AwgjGvhUsiLsAAAAASUVORK5CYII=&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;spector_no_dispose_material.png&quot;
        title=&quot;&quot;
        src=&quot;/static/0a5e920cb16b9a538b5c017806731dc7/69902/spector_no_dispose_material.png&quot;
        srcset=&quot;/static/0a5e920cb16b9a538b5c017806731dc7/5a46d/spector_no_dispose_material.png 300w,
/static/0a5e920cb16b9a538b5c017806731dc7/69902/spector_no_dispose_material.png 520w&quot;
        sizes=&quot;(max-width: 520px) 100vw, 520px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;h2&gt;Reference&lt;/h2&gt;
&lt;p&gt;WeakMap이 알고 싶다 - &lt;a href=&quot;https://ui.toast.com/posts/ko_20210901&quot;&gt;https://ui.toast.com/posts/ko_20210901&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Spector.js - &lt;a href=&quot;https://spector.babylonjs.com/&quot;&gt;https://spector.babylonjs.com/&lt;/a&gt;&lt;/p&gt;</content:encoded></item><item><title><![CDATA[UNIST Pixel Dungeon]]></title><description><![CDATA[Traditional rougelike game introducing about UNIST.
It’s Based on the source code of Shattered Pixel Dungeon Play store: link Github: https…]]></description><link>https://mingyu.kim/unist-pixel-dungeon/</link><guid isPermaLink="false">https://mingyu.kim/unist-pixel-dungeon/</guid><pubDate>Thu, 02 Mar 2017 20:10:10 GMT</pubDate><content:encoded>&lt;p&gt;Traditional rougelike game introducing about UNIST.
It’s Based on the source code of Shattered Pixel Dungeon&lt;/p&gt;
&lt;p&gt;Play store: &lt;a href=&quot;https://play.google.com/store/apps/details?id=com.unistpixel.unistpixeldungeon&quot;&gt;link&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Github: &lt;a href=&quot;https://github.com/mango-tree/UNIST-pixel-dungeon&quot;&gt;https://github.com/mango-tree/UNIST-pixel-dungeon&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 506px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/4afa26901e026cb7fd07a5f7bca53a3d/29f4e/main.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 177.99999999999997%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,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&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;main.png&quot;
        title=&quot;&quot;
        src=&quot;/static/4afa26901e026cb7fd07a5f7bca53a3d/29f4e/main.png&quot;
        srcset=&quot;/static/4afa26901e026cb7fd07a5f7bca53a3d/5a46d/main.png 300w,
/static/4afa26901e026cb7fd07a5f7bca53a3d/29f4e/main.png 506w&quot;
        sizes=&quot;(max-width: 506px) 100vw, 506px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;
&lt;p&gt;&lt;span
      class=&quot;gatsby-resp-image-wrapper&quot;
      style=&quot;position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 506px; &quot;
    &gt;
      &lt;a
    class=&quot;gatsby-resp-image-link&quot;
    href=&quot;/static/b535e09216e86fba85b72cda7dfb5430/29f4e/about.png&quot;
    style=&quot;display: block&quot;
    target=&quot;_blank&quot;
    rel=&quot;noopener&quot;
  &gt;
    &lt;span
    class=&quot;gatsby-resp-image-background-image&quot;
    style=&quot;padding-bottom: 177.99999999999997%; position: relative; bottom: 0; left: 0; background-image: url(&apos;data:image/png;base64,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&apos;); background-size: cover; display: block;&quot;
  &gt;&lt;/span&gt;
  &lt;img
        class=&quot;gatsby-resp-image-image&quot;
        alt=&quot;about.png&quot;
        title=&quot;&quot;
        src=&quot;/static/b535e09216e86fba85b72cda7dfb5430/29f4e/about.png&quot;
        srcset=&quot;/static/b535e09216e86fba85b72cda7dfb5430/5a46d/about.png 300w,
/static/b535e09216e86fba85b72cda7dfb5430/29f4e/about.png 506w&quot;
        sizes=&quot;(max-width: 506px) 100vw, 506px&quot;
        style=&quot;width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;&quot;
        loading=&quot;lazy&quot;
        decoding=&quot;async&quot;
      /&gt;
  &lt;/a&gt;
    &lt;/span&gt;&lt;/p&gt;</content:encoded></item></channel></rss>